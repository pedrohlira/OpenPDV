A DarumaFramework é uma única biblioteca que pode ser utilizada em qualquer um de nossos produtos Fiscais ou não-fiscais, modem, terminal TA2000 e também possui o módulo Genérico onde o usuário pode enviar e receber comandos para qualquer dispositivo utilizando a porta serial.
Nossa biblioteca também pode ser utilizada em Linux ou Windows, 32 ou 64 Bits.
Também possuimos Wrappers Java JNA (Windows, Linux), Java JNI (Windows, Linux), PHP (Windows, Linux), OCX (Windows) e OPOS (Windows) que facilitam ainda mais o porte e desenvolvimento para a DarumaFramework.

Para mais informações sobre os métodos da DarumaFramework acesso nosso Help Online no link 
http://www.desenvolvedoresdaruma.com.br/home/downloads/Site_2011/Help/DarumaFrameworkHelpOnline/Daruma_Framework.htm

Arquivos existentes no pacote:
DarumaFramework - Biblioteca utilizada para trabalhar com as impressoras fiscais, não fiscais, modem, display PDV touchw@ay, TA2000 e também modo genérico

lebin - Biblioteca utilizada para as funções de geração de relatório, cálculo de MD5 e RSA

LeituraMFDBin - Biblioteca utilizada nas funções de geração de relatório para fazer o download dos binários da MF e MFD da impressora FISCAL

hwinterface.sys - Utilizado quando estamos trabalhando com impressora não fiscal conectada a porta paralela.

QrCode_DarumaFramework - Biblioteca utilizada para geração da imagem do código QrCode.

GNE_Framework - Biblioteca utilizada para emissão de NFCe.

WS_Framework - Biblioteca utilizada para comunicação com WebService.

-----------------------------------------------------------------------

DarumaFramework.dll

Data de liberação: 29/07/2014

Versão Arquivo: 08.13.06

ECF 9.82, DUAL 4.98, MODEM 3.53, TA2000 4.05, GENERICO 1.04, DSP 1.05 NFCe 1.41

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60D - Ajuste na rotina que monta os registros 60D, pois itens com aliquota ISENTO não precisam apresentar valor na base de cálculo.

Implementação - iCFImprimir_NFCe_Daruma - Ajustes no método para geração de log, aceitar parametro de retorno vazio, aceitar conteudo do xml nos parametros ao invés do seu caminho.

Implementação - aCFValorLeiImposto_NFCe_Daruma - Passou a permitir sua chamada a qualquer momento, o cupom estando aberto ou não.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60D e 60I - Alteradas apenas para quando opção de Rateio for 2, para deixar campo de desconto zerado no registro que representa o proprio desconto.

Implementação - Torpedo Premiado Paraiba - chave ECF\CF\TorpedoPremiadoParaiba do DarumaFramework.xml - Feito ajuste na rotina que gera a mensagem do Torpedo Premiado Paraiba, trocando o CNPJ pela IE mesmo quando a mesma for ISENTO.

Implementação - Cupom Mania - chave ECF\CF\CupomMania do DarumaFramework.xml - Ajuste na montagem da mensagem do Cupom Mania, para imprimir inscrição estadual igual a ISENTO.

Implementação - rAvisoErro_NFCe_Daruma - Aumentado o tamanho da variavel de retorno da mensagem.

Implementação - Nota Legal - chave ECF\CF\NotaLegal do DarumaFramework.xml - Acrescentado tratamento para imprimir o MD5 com o texto "NL" na primeira linha da mensagem quando informado.

Implementação - Abertura e Fechamento de portas - Feito ajuste na rotina de abertura e fechamento de portas para trabalhar com DUAL ETH e Fiscal na Serial/USB ao mesmo tempo.

Implementação - rGerarRelatorio_ECF_Daruma - NFP - Registro E14 - revisão no tratamento das informações dos campos 9 e 14 para montagem correta do registro quando o cupom foi cancelado.

Implementação - rGerarMapaResumo_ECF_Daruma - Alterado o tamanho da variável de leitura das aliquotas.

Implementação - rGerarRelatorio_ECF_Daruma - ESPELHO - Quando gerado por COO estava pegando apenas 4 dígitos dos 6 informados nos COOs inicial e final.

Implementação - rTipoUltimoDocumentoStr e rTipoUltimoDocumentoInt - Alterada a verificação pra quando CCD for fechado automaticamente pela impressora, retornar o tipo como CCD.

Implementação - confCFNCM_ECF_Daruma - passou a aceitar o caminho do arquivo da tabela com o ".\" para indicar mesma pasta que a DarumaFramework.dll.

Implementação - rStatusWS_NFCe_Daruma - Atualizado o endereçoo do servidor de produção para https.

Implementação - iCFImprimir_NFCe_Daruma - Feito ajustes: para impressão de Danfe em contingência; alterada rotina também para pegar o valor dos tributos do xml informado; feito tratamento no campo cDest e Tipo Ambiente para o QrCode.

Implementação - aCFEstornarPagamento_NFCe_Daruma - tratamento na rotina de estorno para considerar o troco do valor informado.

Implementação - iCFAbrir_NFCe_Daruma -  Adicionado tratamento para aceitar CPF e CNPJ com formatação.

Implementação - tCFEncerrar_NFCe_Daruma e iCFImprimir_NFCe_Daruma - Contingência Online - ajustes para imprimir as duas vias obrigatorias da Contingência Online.

Implementação - chave NFCE\UrlQrcode do GNE_Framework.xml - ajuste para atualizar sempre o seu valor, mesmo quando opção de impressão foi (2) não imprimir.

Implementação - chave PROD\NCM do GNE_Framework.xml - alterado o valor default do NCM para 102030000 - Venda Varejo.

Implementação - Camada de Comunicação - Revisão do tratamento para não considerar o byte CR como final da resposta da impressora.

Nova Implementação - eAjustarDataHora_NFCe_Daruma - Criado método para permitir ajuste de data e hora do computador de acordo com a data hora do servidor SEFAZ, juntamente com o método foram criadas chaves no arquivo DarumaFramework.xml

Nova Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - 60I - Implementação para opção de Rateio 2, passou a verificar se vendas foram feitas arredondando ou truncando para usar a mesma logica para o rateio.

Nova Implementação - NFCe - passou a imprimir os comprovantes também na Impressora Epson TM-T81.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.08.17) e WS_Framework (v.1.4.1).

-----------------------------------------------------------------------
Data de liberação: 11/07/2014

Versão Arquivo: 08.10.03

ECF 9.64, DUAL 4.97, MODEM 3.53, TA2000 4.05 GENERICO 1.04, DSP 1.05 e NFCe 1.34

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Ajuste na rotina de geração para não ocorrer mais erro quando ocorrer o evento de carga de logotipo no binário da impressora.

Implementação - eMemoriaFiscal_ECF_Daruma - Alteração no tipo de variavel utilizado no parametro que aceita boolean e integer, para que tenha o funcionamento correto no JNA.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Revisão na rotina que trata os itens cancelados no estoque para montagem dos registros 60D.

Implementação - tCFCancelar_NFCe_Daruma - O método passou a obedecer o valor configurado para a chave <ImpressaoCompleta> do GNE_Framework.xml, quando estiver com valor 2 não vai imprimir o comprovante de cancelamento.

Implementação - tCFEncerrar_NFCe_Daruma - Alteração para não emitir a Danfe quando o retorno for de duplicidade do número da nota.

Implementação - rGerarRelatorio_ECF_Daruma - MF e TDM - Registro E11 - feito ajuste pois quando a data usada no registro continha dia menor que 10 o registro era montado com data errada.

Implementação - Tratamento da comunicação - Ajustes na rotina de tratamento da Comunicação Serial e Serial-USB, para resolver alguns problemas de perda de comunicação com a Porta Serial e Serial Convertida.

Implementação - NFCe - Tratamento de Acrescimo/ Desconto e Cancelamento de Acrescimo/ Desconto - Ajustes na rotina que trata os descontos e acrescimos aplicados a item ou ao subtotal da nota, para que os valores dos itens sejam atualizados, quando aplicado desconto/ acréscimo ou quando os mesmos são cancelados.

Implementação - rInfoEstendida_NFCe_Daruma - Método revisado para retornar as informações corretamente de acordo com o ultimo comando de venda executado.

Implementação - tCFCancelar_NFCe_Daruma - Ajuste na rotina para evitar erro no cancelamento por causa do horario de cancelamento ser igual ao de emissão, ajuste também nas variaveis utilizadas internamente para evitar estouro de memória.

Implementação - aCFEfetuarPagamento_NFCe_Daruma - Melhora no tratamento dos meios de pagamento, para quando são usados mais de um meio de pagamento pra mesma venda.

Implementação - tCFEncerrar_NFCe_Daruma -  Alterada a forma de calcular o Hash do link do qr code apenas para quando estado for "SP".

Nova Implementação - iCFImpprimir_NFCe_Daruma - criado método que apenas imprime a Danfe, a partir das informações dos xmls de envio e resposta.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.08.08) e WS_Framework (v.1.4.0).

-----------------------------------------------------------------------
Data de liberação: 30/05/2014

Versão Arquivo: 08.08.00

ECF 9.55, DUAL 4.97, MODEM 3.53, TA2000 4.05 GENERICO 1.04, DSP 1.05 NFCe 1.30

(Atualizações apenas para a GNE_Framework.dll)

Implementação - tCFCancelar_NFCe_Daruma - ajustes na rotina de cancelamento para evitar erro quando cancelamento ocorre logo após a emissão da nota; Ajuste também para não dar mais estouro de memória quando cancela danfe já emitida;

Implementação - rInfoEstendida_NFCe_Daruma - Ajustes na rotina que atualiza as informações guardadas após pagamento da nota, para não retornar valores errados; Ajustada também para prever uso do método de identificação da Transportadora.

OBS: A biblioteca a seguir foi atualizada: GNE_Framework (v.2.08.04)

-----------------------------------------------------------------------
Data de liberação: 16/05/2014

Versão Arquivo: 08.08.00
ECF 9.55, DUAL 4.97, MODEM 3.53, TA2000 4.05 GENERICO 1.04, DSP 1.05 NFCe 1.30


Implementação - rGerarRelatorioOffline_ECF_Daruma - SINTEGRA - Registro 75 - Apenas para estado PR (Paraná) não gera mais o registro 75 quando não houver quantidade vendida no mês (casos de venda e cancelamento total da quantidade vendida);

Implementação - rGerarRelatorioOffline_ECF_Daruma - SPED - Registro 0000 - Campo 02 Código da versão do Ato Cotepe foi atualizado;

Implementação - iTEFImprimirResposta_ECF_Daruma - Adicionada impressão do registro 713 que representa a via do cliente.

Implementação - NFC-e - URL do WebService de homologação alterada para https;

Implememtação - rGerarRelatorioOffline_ECF_Daruma - AtoCotepe - Ajuste na leitura do binário da MFD, para quando houver evento repetido de totalização;

Implementação - aCFEfetuarPagamento_NFCe_Daruma - Ajustes na validação da forma de pagamento informada;

Implementação - aCFIdentificaConsumidor_NFCe_Daruma - Ajustes na rotina de identificar consumidor para quando informado CNPJ;

Nova Implementação - Impressão da Danfe - Adicionada a impressão dos dados do consumidor, quando informados;

Nova Implementação - GNE_Framework.xml - Criadas chaves para configurar as urls dos servidores de consulta da SEFAZ de cada estado. 

Nova Implementaçao - GNE_Framework.xml - CONFIGURACAO\AjustarValorFPgto - Criada chave para alterar comportamento da dll sobre o valor pago informado na Danfe;

Nova Implementaçao - rGerarRelatorioOffline_ECF_Daruma - SPED - passou a gerar também um arquivo com registros para o perfil C;

Nova Implementação - XML - ECF\AlteraFPGTO - criada chave para alterar comportamento da DLL sobre formas de pagamento não cadastradas no ECF;

Nova Implementação - eSinalSonoro_ECF_Daruma - criado método que permite acionar o sinal sonoro do ecf;

Nova Implementação - Observer - Inclusão dos métodos para NFC-e no Observer;

Nova Implementação - Métodos do grupo tCF... - atualização nos possíveis retornos do método para retornar -14 quando houver erro de comunicação (SOAP);

Nova Implementação - rAvisoErro_NFCe_Daruma - criado método que retorna o código e mensagem de erro retornados pelo WebService ou código e mensagem de erro do SOAP;

Nova Implementação - aCFAbrirNumSerie_NFCe_Daruma - criado método que permite abrir uma NFC-e informando seu número e série;

Nova Implementação - iCFReimprimir_NFCe_Daruma - criado método que reimprime a última Danfe emitida; 


OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.07.04) e WS_Framework (v.1.3.3).

-----------------------------------------------------------------------
Data de liberação: 17/04/2014

Versão Arquivo: 08.05.09
ECF 9.47, DUAL 4.96, MODEM 3.53, TA2000 4.05 GENERICO 1.04, DSP 1.05 e NFCe 1.26

Implementação - rGerarRelatorio_ECF_Daruma e rGerarEspelhoMFD_ECF_Daruma - quando usado com a configuração ECFzControleAutomatico =1 não estava liberando a porta após realizar geração de arquivo espelho.

Implementação - rGerarRelatorioOffline_ECF_Daruma - SINTEGRA - Registros 60D - em alguns casos de itens cancelados, o registro 60R estava ficando com valor negativo.

Implementação - rStatusImpressora_DUAL_DarumaFramework - para DR700ETH - quando usada a comunicação via IP, o método de status não estava retornando resposta quando/ enquanto a tampa da impressora está aberta.

Implementação - DUAL- Definição de porta por IP - A troca de IP e porta configurados não estava ocorrendo quando alterados em vôo.

Implementação - tCFInutilizar_NFCe_Daruma - Ajuste na rotina que envia as informações passadas no método para o WebService, não estavam sendo utilizadas corretamente.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.06.06) e WS_Framework (v.1.3.2).
-----------------------------------------------------------------------
Data de liberação: 31/03/2014

Versão Arquivo: 08.05.04
ECF 9.45, DUAL 4.95, MODEM 3.53, TA2000 4.05 GENERICO 1.04, DSP 1.05 e NFCe 1.24

Implementação - rInfoEstendida_ECF_Daruma - Feito ajustes para corrigir erros de digitação e evitar o uso incorreto do método.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 75 - Passou a alinhar as descrições de item sempre à esquerda, mesmo que o item tenha sido vendido com espaços antes da descrição.

Implementação - iCFEfetuarPagamento_ECF_Daruma - Qualquer meio de pagamento com acentuação que for informado sem a mesma, será tratado pela dll, fazendo com que a forma de pagamento certa seja utilizada, o mesmo acontece para o contrario, informar o pagamento com acentos e na impressora estar cadastrada sem.

Implementação - iReducaoZ_ECF_Daruma - Ajuste na rotina que aguarda a compactação na impressão da redução Z, pois em alguns casos o método estava retornando erro e a Redução havia sido impressa sem problemas. Agora o time out de compactação segue o timeout de Redução Z configurado no XML também.

Implementação - tCFCancelar_NFCe_Daruma - ajuste para fazer o cancelamento em ambiente de homologação.

Nova Implementação - aCFIdentificarTransportadora_NFCe_Daruma - Criado novo método para identificação da Transportadora na NFCe.

Nova Implementação - rURLQrcode_NFCe_Daruma – Criado método que retorna a URL impressa no QRCode.

Nova Implementação - aCFTotalizar_NFCe_Daruma - Criada rotina para aplicar o desconto/ acrescimo informado no método nos valores do cupom e nas tags de desconto/ acrescimo.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.06.03) e WS_Framework (v.1.2.3).
-----------------------------------------------------------------------
Data de liberação: 11/03/2014

Versão Arquivo: 08.04.39
ECF 9.40, DUAL 4.94, MODEM 3.52, TA2000 4.05 GENERICO 1.04, DSP 1.05 NFCe 1.19

Implementação - iImprimirTexto_DUAL_DarumaFramework - Ajustes para não causar erro quando a tag de preenchimento de linha <tc> estiver sendo utilizada.

Implementação - NFCe - Alterada a url de produção de http para https.

Implementação - NFCe - Ajustado o tamanho da resposta do WebService.

Implementação - rGerarRelatorioOffline_ECF_Daruma - Feito ajuste na rotina que lê cupons grandes do arquivo binário, estava causando estouro de memória.


OBS: A seguinte biblioteca foi atualizada - GNE_Framework(v.2.05.12).
-----------------------------------------------------------------------
Data de liberação: 28/02/2014

Versão Arquivo: 08.04.36
ECF 9.40, DUAL 4.94, MODEM 3.52, TA2000 4.05 GENERICO 1.04, DSP 1.05 NFCe 1.19

Implementação - eBuscarPortaVelocidade_DUAL_DarumaFramework - feitos ajustes no log da rotina.

Implementação - rListarSMS_MODEM_DarumaFramework - Método adaptado para seguir configuração da chave MODEM\ListarSmsSIM para geração da listagem com nome do cartão SIM que está sendo lido.

Implementação - rGerarRelatorioOffline_ECF_Daruma - Arquivos NFPTDM e TDM - Ajustes no tratamento do contador de CRZ que estava causando problemas na geração.

Implementação - tEnviarSms_MODEM_DarumaFramework - Ajuste para envio com a chave MODEM\Thread ativa, estava enviando sujeira junto com a mensagem. 

Implementação - iCFVender_ECF_Daruma - Alterado tratamento do valor informado para o campo Valor Unitário, quando a impressora estava com 3 casas decimais para o mesmo o tratamento estava errado.

Implementação - rGerarRelarorioOffline_ECF_DAruma - SPED - Passou a pegar corretamente os percentuais de PIS e COFINS informados, quando abaixo de "1,00" e indormados com ",".

Implementação - tCFEncerrar_NFCe_Daruma - Feito ajuste na rotina que calcula o MD5 para envio do xml final para o servidor.

Implementação - aCFVender_NFCe_Daruma - Correção no tratamento das alíquotas informadas para aceitar os valores passados com o separador ",".

Nova Implementação - aCFVenderCompleto_NFCe_Daruma - Criado método de venda que permite informar também o NCM e CFOP referentes ao item vendido.

Nova Implementação - tCFEncerrar_NFCe_Daruma - Através do subgrupo de chave NFCE\MSGPROMOCIONAL do GNE_Framework.xml passou a ser possível escolher se a Mensagem Promocional será impressa ou não, e qual título ela terá.

Nova Implementação - aCFIdentificaConsumidor_NFCe_Daruma - Criado método para fazer a identificação do consumidor após a abertura do mesmo. Neste método é possível informar também o e-mail do consumidor.

Nova Implementação - aCFValorLeiImposto_NFCe_Daruma - Novo método para informar o valor que deve ser impresso com a mensagem referente a Lei do Imposto. A mensagem também passou a  ser configurável no GNE_Framework.xml.

Nova Implementação - tCFInutilizar_NFCe_Daruma - Criado método para informar um número ou intervalo de números de NFCe que não vão ser utilizados.


OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework(v.2.05.11) e WS_Framework (v.1.2.1.0).
-----------------------------------------------------------------------
Data de liberação: 19/02/2014

Versão Arquivo: 08.04.25
ECF 9.35, DUAL 4.93, MODEM 3.49, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.17


Implementação - eBuscarPortaVelocidade_ECF_Daruma - Alteração na rotina que busca a porta e velocidade da impressora, para não identificar porta com outro equipamento erradamente.

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <sn> - Passou a aceitar um número que indica o número de bips que a impressora irá emitir.

Implementação - NFCe - correção nos endereços da SEFAZ do Mato Grosso que são impressos no QrCode que estavam desatualizados.

Nova Implementação - rInfoEstendida_NFCe_Daruma - Acrescentadas mais informações retornadas após o método tCFEncerrar_NFCe_Daruma: Protocolo de Autorização, Série, Data/ Hora de Autorização, Chave de Acesso e DigestValue.

Nova Implementação - aCFValorLeiImposto_NFCe_Daruma - Criada função para informar o valor que deve ser impresso na mensagem referente a Lei do Imposto.

Nova Implementação - rReceberTodosSms_MODEM_DarumaFramework - criado novo método que lê todos os SMS's, lidos e não lidos.


OBS: A biblioteca GNE_Framework foi atualizada para a versão 2.05.04, para funcionamento correto ela deve ser atualizada.

-----------------------------------------------------------------------
Data de liberação: 31/01/2014

Versão Arquivo: 08.04.15
ECF 9.30, DUAL 4.91, MODEM 3.48, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.15

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - Implementado tratamento que permite a geração do registro 60D de cancelamento para quando a quantidade cancelada é igual a quantidade vendida

Implementação - corrigido tamanho do buffer de resposta do webservice da NFCe

Nova Implementação - rInfoEstendida_NFCe_Daruma - Método responsável por retornar  ao usuário informações referentes ao ultimo comando executado

Nova Implementação - Alterações na rotina de comunicação com webservice da NFCe para permitir a comunicação com servidor de homologação

OBS: A biblioteca WS_Framework foi atualizada para a versão 1.2.0

-----------------------------------------------------------------------

Data de liberação: 20/01/2014

Versão Arquivo: 08.04.11
ECF 9.28, DUAL 4.90, MODEM 3.48, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.14

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - Quando a UF for MG não sera gerado o registro 60R

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - O campo 11 do registro 75 sempre deve ser gerado com valor zerado pois o ECF não trabalha com substituição tributária

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - Correção na geração do registro 60I quando o item vendido possui acréscimo

Implementação - iRGImprimirTexto_ECF_Daruma - Quando a impressora estava em erro e a chave AguardarImpressao habilitada o metodo não estava retornando o código de erro e aviso

Implementação - tCFEncerrar_NFCe_Daruma - Adicionada mais informações no arquivo de auditoria para mostrar os passos que o metodos executou

Nova Implementação - Adicionados métodos de NFCe no Observer

Nova Implementação - DUAL - Implementado tratamento para que o método iImprimirBMP_DUAL_DarumaFramework possa imprimir bitmap com altura negativa

OBS: A biblioteca WS_Framework foi atualizada para a versão 1.1.0

-----------------------------------------------------------------------

Data de liberação: 10/01/2014

Versão Arquivo: 08.04.02
ECF 9.26, DUAL 4.88, MODEM 3.48, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.09

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - Quando a Inscrição Estadual gravada na impressora contém "/" o validador acusa erro por ter caracteres não numéricos no campo, então foi feito tratamento para a I.E.

Implementação - rGerarRelatorio_ECF_Daruma - ATO COTEPE - MFD e NFP - Campo E19, estava sem campo data, e com isso todos os próximos também acusavam erro, feito ajuste para preenchimento correto do registro.

Implementação - rGerarRelatorio_ECF_Daruma - Ajustes na rotina de Retorno de erro do método, em alguns casos estava retornando valor errado pois faltava o sinal de "-" na frente do valor do retorno.

Implementação - XML - Nas chaves START\LocalArquivos, START\LocalArquivosRelatorios e START\PathBibliotecas quando informado "./" ou ".\" a DLL passou a interpretar corretamente como o diretorio onde está a DLL, pois em alguns casos estava causando erro por não achar o arquivo e procurar em pasta errada.

Nova Implementação - NFCe - criados novos métodos para NFC-e: aCFCancelarItemParcial_NFCe_Daruma, aCFLancarAcrescimoItem_NFCe_Daruma, aCFLancarDescontoItem_NFCe_Daruma,
aCFCancelarAcrescimoItem_NFCe_Daruma, aCFCancelarDescontoItem_NFCe_Daruma, aCFEstornarPagamento_NFCe_Daruma
e tCFCancelar_NFCe_Daruma;

OBS: A biblioteca GNE_Framework foi atualizada para versão 2.4.3.0

-----------------------------------------------------------------------
Data de liberação: 06/01/2014

Versão Arquivo: 08.03.30
ECF 9.21, DUAL 4.88, MODEM 3.48, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.07

Implementação - Tratamento de Retorno - com a impressora com pouco papel quando o método rStatusImpressora_ECF_Daruma era chamado, o Erro estava retornando informação errada. Feito ajuste também para quando o papel acaba ou a impressora é desligada no meio da Leitura X.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Itens cancelados não estavam atualizando controle interno da DLL para gerar os registros 75, só era tratado quando o cupom inteiro era cancelado.

Nova Implementação - NFCe - feito tratamento para retorno de erro quando as bibliotecas auxiliares para NFCe não são encontradas.

Nova Implementação - XML - \START\PathBibliotecasAuxiliares - o caminho desta chave passou a valer também para as bibliotecas da NFCe - WS_Framework e GNE_Framework.

Nova Implementação - aCFCancelarItem_NFCe_Daruma - criado método que permite cancelamento de item no cupom da NFCe.

OBS: A biblioteca GNE_Framework foi atualizada para versão 2.3.1.0

-----------------------------------------------------------------------
Data de liberação: 30/12/2013

Versão Arquivo: 08.03.27

Versão do Produto: ECF 9.19, DUAL 4.88, MODEM 3.48, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.06

Implementação - tEnviarSms_MODEM_DarumaFramework - ajuste na rotina de Time-out do método, pois causava erro no envio de sms quando horario virava para hora "cheia"(por exemplo 08:00:00)

Implementação - iCFEncerrarPadrao_ECF_Daruma - Quando recurso da Lei do Imposto está setada para imprimir em Relatorio Gerencial, mesmo não existindo cupom o Relatorio era impresso depois de usar este comando.

Implementação - rGerarRelatorioOffline_ECF_Daruma - Após a execução deste método o retorno dos métodos não estava mais retornando valores diferentes de 0 e 1.

Implementação - iCFEncerrar_ECF_Daruma - Feita modificação no tratamento da leitura da Serial, pois quando a impressora é desligada durante a impressão a aplicação ficava presa. 

Implementação - rTipoUltimoDocumentoStr_ECF_Daruma - A gravação do tipo de ultimo documento estava ocorrendo de forma errada, levanto este comando a retornar informação errada depois que chamado um método de encerramento de cupom por exemplo sem ter cupom aberto.

-----------------------------------------------------------------------
Data de liberação: 29/11/2013

Versão Arquivo: 08.03.17

Versão do Produto: ECF 9.12, DUAL 4.88, MODEM 3.47, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.05

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - NFPTDM - Feito ajustes pois a data/hora estavam ficando errados em alguns casos, por causa do horário de verão.

Implementação - rGerarReletorio_ECF_Daruma - AtoCotepe - MF, TDM e NFPTDM - E11 campo de data estava com formato errado o correto é AAAAMMDD. Ajustes também para o .inf gerado guardar a hora da geração dos binarios corretamente, hora que será usada no registro E11 também.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Alguns registros 75 não estavam sendo criados, causando erro na validação do arquivo por ter 60D ou 60I sem registro 75 correspondente.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 75 - Quando item é de Subistituição Tributária (F1), não precisa ter valor de base de cálculo. Passamos a colocar zeros.

Implementação - XML - As chaves onde indicamos porta de comunicação passaram a aceitar a porta escrita em letras minúsculas.

Nova Implementação - rCFVerificarStatus_NFCe_Daruma - criado método que retorna o status/ fase do Cupom para NFC-e.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework(v.2.0.4.0) e WS_Framework (v.1.0.3.0).

-----------------------------------------------------------------------
Data de liberação: 08/11/2013

Versão Arquivo: 08.03.08

Versão do Produto: ECF 9.08, DUAL 4.86, MODEM 3.47, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.03

Implementação - XML - DUAL\LinhasGuilhotina - Ajuste para utilizar o valor informado corretamente, saltando as linhas antes de acionar a guilhotina.

Implementação - XML - MODEM\SmsClasse0 - criada chave para indicar o tipo de SMS enviado.

OBS: Atualização da biblioteca auxiliar lebin - versão 0.8.10.0

-----------------------------------------------------------------------
Data de liberação: 01/11/2013

Versão Arquivo: 08.03.05

Versão do Produto: ECF 9.08, DUAL 4.85, MODEM 3.46, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.02

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe (MFD) - Registro E14 - quando não houve movimento no periodo e geramos um registro E14 zerado, o formato da data correto é espaços em branco e não zeros.

Implementação - rGerarMapaResumo_ECF_Daruma - Foi incluso na lista de métodos para o Observer com índice 1199.

OBS: Atualização das bibliotecas auxiliares: GNE_Framework - versão 2.0.0.0 e lebin - versão 0.8.9.0
-----------------------------------------------------------------------
Data de liberação: 24/10/2013

Versão Arquivo: 08.03.02

Versão do Produto: ECF 9.06, DUAL 4.85, MODEM 3.46, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.01

Implementação - rGerarRelatorio_ECF_Daruma - ATOCOTEPE - MF, MFD, TDM, NFP e NFPTDM - feito ajustes na rotina de geração de registros do AtoCotepe para que no periodo que nçao teve movimento fiscal, seja gerador, apenas no tipo MFD, registros E14, E15 e E21 zerados.

Implementação - tCFEncerrar_NFCe_Daruma - ajustes para não dar erro de arquivo não encontrado mesmo com o xml de envio gerado.

Implementação - Métodos _NFCe_Daruma - ajustes para que não seja definido produto em toda chamada desses métodos, pois quando já está definido não é necessário.

Nova Implementação - Auditoria NFCe - criada chave no DarumaFramework.xml para ativar a geração de log de comandos _NFCe_Daruma.

OBS: As bibliotecas auxiliares GNE_Framework e WS_Framework foram atualizadas, verifique as versões atuais: GNE_Framework - 0.0.0.1 e WS_Framework - 1.0.1.0

-----------------------------------------------------------------------
Data de liberação: 21/10/2013

Versão Arquivo: 08.03.00

Versão do Produto: ECF 9.05, DUAL 4.85, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - Cupom adicional bilhete de passagem - Feito ajuste na lógica para corrigir o valor do cupom fiscal mostrado no cupom adicional

Implementação - Ajustes para as funções do Observer que possuem parametros do tipo inteiro no retorno e causavam travamento.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Criada chave ECF\SINTEGRA\RateioSubTotal que aceita valor 0, 1 ou 2, onde o zero é default e não altera em nada a geração atual, e as outras opções ativam o ratei de desconto dado em subtotal e geram outros registros para que o arquivo valide em aplicações de contabilidade.

Nova Implementação - Implementados métodos para trabalhar com emissão de NFCe: aCFAbrir_NFCe_Daruma, aCFVender_NFCe_Daruma, aCFTotalizar_NFCe_Daruma, aCFEfetuarPagamento_NFCe_Daruma, tCFEncerrar_NFCe_Daruma, aCFInicializar_NFCe_Daruma
rStatusWS_NFCe_Daruma e regAlterarValor_NFCe_Daruma

OBS: A partir desta versão de DarumaFramework.dll foram acrescentadas duas dlls auxiliares ao pacote, elas são utilizadas na emissão de NFCe (GNE_Framework.dll e WS_Framework.dll)
-----------------------------------------------------------------------

DarumaFramework.dll

Data de liberação: 11/10/2013

Versão Arquivo: 08.02.85

Versão do Produto: ECF 9.02, DUAL 4.85, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - LEI 12.741/13 "DE OLHO no IMPOSTO" - chave ECF\LEI12741\MSG - passou a aceitar o caractere "#" no local da mensagem onde deseja saltar linha. Para quando utilizamos formatação de texto, poder posicionar melhor a mensagem.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C470 - quando o item possuir aliquitas não tributadas( N, F ou S) o campo aliquota deve ficar com 0,00 e não vazio.

Implementação - iCFCancelarAcrescimoSubtotal_ECF_Daruma - Foram feitos ajustes na assinatura e no tratamento de valores internos para que o método retorne o erro corretamente.

Implementação - iReducaoZ_ECF_Daruma - ajuste para não dar erro em algumas linguagens quando parametro é passado em branco, ou vazio.

-----------------------------------------------------------------------

Data de liberação: 02/10/2013

Versão Arquivo: 08.02.81

Versão do Produto: ECF 8.98, DUAL 4.85, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - confCFNCM_ECF_Daruma - ajuste na leitura do arquivo auxiliar de NCM's, para que seja possível usar todos os NCM's sem causar erro de leitura do arquivo.

Implementação - iReducaoZ_ECF_Daruma - Ajuste na rotina que monta o comando de redução Z e envia para a impressora, para obedecer o parametro informado na chamada do método (de data e hora). Para não ter problemas os espaços em branco são retirados do parametro e depois ele é verificado quanto ao seu tamanho.

Implementação - DUAL - Chave <ControleAutomatico>1 e comunicação via IP - Feito ajuste para obedecer a configuração de Controle Automatico, permitindo que mais de uma aplicação se comunique com a mesma impressora, uma de cada vez. 

Implementação - rLerDecimais_ECF_Daruma - Estava com falha na sua rotina e causava problemas no retorno do método utilizado em seguida dele. 


-----------------------------------------------------------------------
Data de liberação: 24/09/2013

Versão Arquivo: 08.02.76

Versão do Produto: ECF 8.95, DUAL 4.83, MODEM 3.45, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe MFD (arquivo entregue no RJ) - feita implementação para que o arquivo seja gerado com E14, E15 e E21 zerados quando periodo não tiver movimento nenhum.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe: MF, MFD, TDM, NFP e NFPTDM - feito ajuste na rotina que monta o arquivo para que sejam retirados caracteres com acentuação, que não fazem parte da tabela ASCII padrão, evitando recusa do arquivo em qualquer validador.

Implementação - rGerarRelatorio_ECF_Daruma - RZ - uma variável grande para receber as informações da Rz estava causando access violation quando método usado pelo Observer. Feito ajuste no tamanho de variável utilizada pela DLL internamente.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe: MF, MFD, TDM, NFP e NFPTDM - ajustes na rotina que trata cupons grandes no arquivo binário e adicionado tratamento para quando o cupom possui muitos meios de pagamento (mais de cem), para evitar estouros de memoria.


-----------------------------------------------------------------------
Data de liberação: 10/09/2013

Versão Arquivo: 08.02.67

Versão do Produto: ECF 8.87, DUAL 4.83, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe (MFD, TDM, NFP e NFPTDM) - Ajuste na geração de registros E15 quando item possui desconto em %, estava sendo calculado valor errado de desconto, causando erro na validação do arquivo.

Implementação - LEI 12.741/13 "DE OLHO no IMPOSTO" - feito ajuste no método de leitura dos valores de imposto a partir do arquivo NCM.tmp, para que na utilização de wrappers - como JNA e Observer - não cause erros na hora de realizar a leitura.

-----------------------------------------------------------------------
Data de liberação: 27/08/2013

Versão Arquivo: 08.02.65

Versão do Produto: ECF 8.85, DUAL 4.83, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Revisada rotina do registro C420, para quando tem e quando não tem cancelamento e verificação do cupom cancelado, se possui ou não itens. Estava causando access violation em alguns casos, e não estava gerando o registro quando o cancelamento não é no inicio do dia. 

Implementação - rTipoUltimoDocumentoInt_ECF_Daruma e rTipoUltimoDocumentoStr_ECF_Daruma - Quando um cupom é cancelado o método não estava retornando corretamente a informação de Cupom Fiscal, feito ajuste para gravar o tipo do documento quando o mesmo for cancelado.

Implementação - Arquivo NCM.tmp - alterada rotina que cria/ lê/ edita o arquivo, para não indicar caminho como ./ apenas e sim ler o diretorio completo para usar este valor nos acessos ao arquivo.

Implementação - confCadastrar_ECF_Daruma - revisada rotina de cadastro pois os tipos: RG, FPGTO e ALIQUOTA não estavam retornando corretamente quando já existia o totalizador informado ou quando a impressora estava com todas as posições preenchidas.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - feito ajuste para o arquivo ser gerado de acordo com a nova chave do XML que indica se deve ser feito o Rateio de desconto ou acrescimo de cupom nos registros 60D e 60I.

Nova Implementação - XML - ECF\SINTEGRA\RateioSubTotal - Chave criada para indicar se a geração do Sintegra vai fazer o Rateio de desconto ou acrescimo de cupom, para os itens, nos registros 60D e 60I

-----------------------------------------------------------------------
Data de liberação: 15/08/2013

Versão Arquivo: 08.02.57

Versão do Produto: ECF 8.77, DUAL 4.83, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - rTipoultimoDocumentoStr_ECF_Daruma e rTipoUltimoDocumentoInt_ECF_Daruma - passaram a logar mais informações no Auditoria_ECF.txt

Implementação - rCompararDataHora_ECF_Daruma - Ajuste na rotina interna do método para que os retornos de erro e aviso sejam entregues corretamente

Implementação - confCadastrar_ECF_Daruma - o parametro pszValor não estava aceitando strings maiores que 25, agora está aceitando até 200.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - registro C490 - feito ajuste na rotina de que soma o valor no campo 7

Implementação - rGerarRelatorio_ECF_Daruma - SPED - registro C425 - revisão da rotina de organização dos registros C425 no arquivo, para que não sejam mais duplicados.

Implementação - LEI de OLHO no IMPOSTO - Correção do nome default do arquivo .csv na chave ECF\LEI12741\LocalArquivoNCM que ficou com o valor: ./IBPTAX.csv

Implementação - Auditoria_ECF.txt - Ajustes para voltar a separar os métodos usados com a linha tracejada e também ajustes de alinhamentos.

Implementação - rCMEEfetuarCalculo_ECF_Daruma - foi revisado pois estava causando problemas em outros métodos depois de utilizado.

Implementação - iCFEfetuarPagamentoPadrao_ECF_Daruma - revisada a rotina de validação do saldo a pagar, quando é zero estava retornando o Retorno do Método errado.

Implementação - eCarregarBitmapPromocional_ECF_Daruma - não estava pegando o retorno do método fazendo com q a sua resposta fosse para o método seguinte.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - NFP, NFPTDM, MF, MFD e TDM - feito tratamento dos caracteres de formatação quando os mesmsmos aparecem nos dados do consumidor.

Nova Implementação - confCFNCM_ECF_Daruma - agora é possível informar o NCM e o ex do código, por exemplo: "111111e02" 

Nova Implementação - XML - ECF\LEI12741\ColunasIBPT - criada a chave ColunasIBPT onde deve ser feita a configuração das colunas que serão utilizadas do arquivo .csv

-----------------------------------------------------------------------
Data de liberação: 31/07/2013

Versão Arquivo: 08.02.46

Versão do Produto: ECF 8.66, DUAL 4.83, MODEM 3.45, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - iRGImprimirTexto_RCF_Daruma - feito ajuste para não retornar "sujeira" quando acaba papel acaba antes do fim da impressão.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C420 do totalizador Canc-T - feito ajuste para que não gere duplicado quando ocorrer cancelamento de cupom fiscal que não teve itens.

-----------------------------------------------------------------------
Data de liberação: 31/07/2013

Versão Arquivo: 08.02.44

Versão do Produto: ECF 8.64, DUAL 4.83, MODEM 3.45, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - iCCDImprimirTexto_ECF_Daruma - com cabo de comunicação USB equando a impressora está desligada não retornarva corretamente na primeira vez que o comando era chamado.

Implementação - iReducaoZ_ECF_Daruma - quando chave <AguardarImpressao> está ligada não retornava corretamente o erro de que a RZ já havia sido emitida, para a chamada do método mesmo após o fechamento do dia atual.

Implementação - rStatusImpressoraBinario_ECF_Daruma - com a chave <AguardarImpressao> =1 estava causando erro na aplicação quando utilizavamos este médodo. 

Implementação - rGerarRelatorio_ECF_Daruma - Feitos novos ajustes para que não formate campos de data incorretamente, e também para quando impressora é nova, para contornar problemas de informações zeradas, que ainda não tem porque não foi utilizada.

Implementação - Camada de comunicação - Para impressora fiscal, foi feito ajuste de configuração do controle de fluxo, para que não cause problemas em vendas, quando o volume é grande e também na geração de arquivo Espelho da MFD.

Implementação - iImprimirTexto_DUAL_DArumaFramwework - Feito ajuste para a tag <c> - Condensado que não estava funcionando corretamente dentro do texto lateral (de código de barras) e também para a taga <tc> que estava causando exceção quando utilizada fora do texto lateral.

Implementação - Observer - Ajuste na separação de Submenus, para que os métodos rEfetuarDownloadMF_ECF_Daruma e rEfetuarDownloadMFD_ECF_DAruma apareçam corretamente no submenu de Geração de Arquivos.

Nova Implementação - Criados novos alias para alguns métodos que ainda não possuiam: rTipoUltimoDocumentoStr_ECF, rTipoUltimoDocumentoInt_ECF, iRelatorioConfiguracao_ECF, rConsultaStatusImpressoraInt_ECF, rConsultaStatusImpressoraStr_ECF, rStatusImpressoraBinario_ECF, rRetornarInformacaoSeparador_ECF, rRetornarNumeroSerieCod_ECF, rVerificarNumeroSerieCod_ECF, iTEF_ImprimirRespostaCartao_ECF, rGerarRelatorioOffline_ECF, iCFCancelarDescontoItem_ECF, iCFCancDescontoUltimoItem_ECF, iCFCancelarAcrescimoItem_ECF, iCFCancAcrescimoUltimoItem_ECF

Nova Implementação - eApagarSms_MODEM_DarumaFramework - agora além de aceitar como parametro o índice da mensagem a ser apagada, passou a aceitar "L" para apagar as mensagens lidas ou "N" para apagar as mensagens não lidas.


-----------------------------------------------------------------------
Data de liberação: 25/07/2013

Versão Arquivo: 08.02.36

Versão do Produto: ECF 8.58, DUAL 4.82, MODEM 3.44, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - Melhorias feitas no startup da dll, liberando a aplicação mais rapido quando o dispositivo não é encontrado.

Implementação - iImprimirTexto_DUAL_DarumaFramework - Tag <tc> e tag <i> - feito ajustes para que a tag <tc> tenha sua função de completar a linha com o caracter corretamente mesmo quando for utilizada dentro do texto lateral ao código de barras. Para a tag <i> foi feito ajuste para só mandar comando diferente quando a impressora for matricial, caso contratio envia o mesmo comando sempre.

Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - não estava permitindo o cadastro de um novo "TNF" - Totalizador Não Fiscal, agora está cadastrando corretamente.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Ajuste feito na organização dos registros no arquivo SPED_DRM.txt que estava ficando com registros C420 e C425 ordenados da forma errada.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - NFP, NFPTDM, MFD e TDM - registros E15 com situação tributaria de Cancelamento, estava com a sigla errada da situação, o correto é: "Can-T"

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - criada nova tag de formatação para impressão DUAL, Tag <ju>xxx</ju> que justifica o texto enviado entre a tag.

-----------------------------------------------------------------------
Data de liberação: 12/07/2013

Versão Arquivo: 08.02.27

Versão do Produto: ECF 8.51, DUAL 4.81, MODEM 3.44, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - Correção na rotina de leitura de informações da impressora, estava pegando valores errados, causando problema na hora de usar totalizadores.

-----------------------------------------------------------------------
Data de liberação: 11/07/2013

Versão Arquivo: 08.02.26

Versão do Produto: ECF 8.50, DUAL 4.81, MODEM 3.44, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - eBuscarPortaVelocidade_MODEM_DarumaFramework - feito ajuste para não configurar como modem Daruma alguns modens(fax modem) que responde aos comandos AT.

Implementação - Auditoria_MODEM.txt - feito ajuste na rotina de geração do log que estava ficando com identação errada dificultando a visualização.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C420 do totalizador "Canc-T", quando no dia houve apenas o cancelamento de cupom sem itens (abriu cupom e cancelou) o arquivo deve conter o registro C420 referente ao totalizador de cancelamento, com valor zerado.

Implementação - rStatusImpressora_ECF_Daruma - USB - Feito ajuste em relação a USB para que retorne o status corretamente depois de uma perda e retomada de comunicação.

Implementação - DUAL - Controle Automático com Socket - Com ip e porta configurados no lugar da Porta de comunicação a configuração da DLL ControleAutomatico não estava sendo respeitada corretamente.

Implementação - Auditoria_ECF.txt - ajustes no log de comandos da camada de comunicação que estava logando informação errada.

Implementação - ECF - Camada de comunicação - feito ajustes para retirar comandos que ficaram sem função com a melhora da checagem de status.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe 17/04 - NFP, NFPTDM, MF, MFD e TDM - Registros que contém campo de Data, feito revisão no formato de todos eles para que fiquem todos iguais (AAAAMMDD).

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C405 - Alterado para pegar o COO da redução Z e não do último documento do dia como estava sendo feito. Ficando assim de acordo com o layout do SPED Fiscal.

Implementação - rGerarRelatorioOffline_ECF_Daruma - Verificada a rotina de geração offline utilizando arquivo .idx e .dat não estava ocorrendo com sucesso.

Implementação - rGerarRelatorio_ECF_DAruma - AtoCotepe 17/04 - NFP, NFPTDM, MF, MFD e TDM - Registros E01 e E02 - Feito tratamento para retirar caracteres de formatação e acentuação dos dados que são lidos do clichê da impressora. Os acentos causavam erros no validador de Rondônia.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60R - Ajuste para voltar a não gerar Registros 60R de itens com quantidade zerada.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe 17/04 - NFP, NFPTDM, MFD e TDM - Registros E15 - Inclusão de rotina para resgatar novemante os totalizadores da impressora quando no meio do período houve intervenção com limpeza dos mesmos. Isso estava causando problemas no registro E15 que ficava sem a indicação de Situação Tributária.

Nova Implementação - XML - Criadas chaves no XML em MODEM para <PortaGPRS> e <Profile>. Ambas são usadas nas configurações do modem para GPRS, não sendo mais um valor fixo da DLL para estas configurações.

Nova Implementação - LEI DE OLHO NO IMPOSTO - Criado recurso que calcula automaticamente o total de imposto do cupom, e seu percentual, para este recurso temos 3 chaves novas no XML no caminho ECF\LEI12741\ e 2 novos métodos confCFNCM_ECF_Daruma - método que deve ser usado para informar NCM e rCFVrImposto_ECF_Daruma - método que retorna o percentual e valor de imposto do item ou do total do cupom.

-----------------------------------------------------------------------
Data de liberação: 24/06/2013

Versão Arquivo: 08.02.07

Versão do Produto: ECF 8.35, DUAL 4.79, MODEM 3.42, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - XML - Alteração no valor padrão das chaves ECF\MensagemApl1 e ECF\MensagemApl2, ficando vazias a partir desta versão. Assim quando a mensagem não estiver programada, não serão mais impressas as duas linhas conforme era feito anteriormente.

Implementação - eCarregarBitmapPromocional_ECF_Daruma e iEnviarBMP_DUAL_DarumaFramework - ajuste feito na rotina que lê o bitmap e envia o mesmo para a memória da impressora para que a carga aconteça com sucesso.

Implementação - Retorno de Erros e Avisos - Ajuste na rotina de tratamento interno dos retornos para que sejam retornados os valores corretos para "Fim de Papel".

Implementação - eRSAAssinarArquivo_ECF_Daruma - inclusão dos caracteres [CR][LF] no final da linha que contém o EAD, pois em alguns validadores estava dando erro por não ter a quebra e salto de linha.

Implementação - rGerarArquivo_ECF_Daruma - SINTEGRA - Registro 60D - quando item cancelado o registro estava trazando o valor da mercadoria zerado, o correto é trazer o valor real dela e na tributação "CANC-T"

Nova Implementação - rSmsIndices_MODEM_DarumaFramework - criano novo método que lê e retorna todos os índices de Sms's existentes no modem, de acordo com o tipo solicitado.

-----------------------------------------------------------------------
Data de liberação: 05/06/2013

Versão Arquivo: 08.01.11

Versão do Produto: ECF 8.29, DUAL 4.78, MODEM 3.41, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM - feito ajuste para quando impressora for do DF, gerar o registro E11 com informações do dia de movimento, independente do dia em que o arquivo foi gerado.

Implementação - iTEF_ImprimirResposta_ECF_Daruma e iTEF_ImprimirRespostaCartao_ECF_Daruma - quando chave <SaltarLinhasTEF> do XML estiver configurada o correto é saltar linhas antes da impressão. 

Implementação - rGerarRelatorio_ECF_Daruma - NFP e NFPTDM - Feito ajuste na rotina que trata o dia do movimento para criar arquivo, pois em apenas alguns casos especificos não estavam sendo gerados arquivos de dias que tinham redução Z depois da meia noite. 

Implementação - rGerarEspelhoMFD_ECF_Daruma e rGerarRelatorio_ECF_Daruma (com tipo ESPELHO) - quando a impressora está ligada pela USB, estava com lentidão e o espelho não estava sendo grava por completo. 

Implementação - rGerarRelatorio_ECF_Daruma - Arquivos AtoCotepe(NFP, NFPTDM, MF, MFD e TDM) - em alguns casos o tratamento da Data de Gravação do Software Básico da impressora não era feito, ficando a data em formato errado no registro E01. O correto é aaaammdd.

Implementação - iImprimirTexto_DUAL_DarumaFramework - <qrcode> - feijo ajuste no tratamento dos parâmetros de impressão do qrcode para que o Null seja tratado de forma correta e não cause problemas na impressão do código. 

Implementação - rGerarRelatorio_ECF_Daruma - Arquivos AtoCotepe(NFP, NFPTDM, MFD e TDM) - Registro E15, campo 15 Totalizador Parcial, deve ser preenchido com Can-T quando item é cancelado.

Implementação - rLerSmsConfirmacao_MODEM_DarumaFramework - Não estava conseguindo ler corretamente as mensagens de confirmação, feito ajuste para que o padrão do retorno dessas mensagens não fosse alterado. 

-----------------------------------------------------------------------
Data de liberação: 21/05/2013

Versão Arquivo: 08.01.00

Versão do Produto: ECF 8.21, DUAL 4.77, MODEM 3.40, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - iTEF_ImprimirResposta_ECF_Daruma e iTEF_ImprimirRespostaCartao_ECF_Daruma - após a impressão do arquivo estes métodos passaram a saltar automaticamente o número de linhas que estiver configurado no XML em ECF\CCD\SaltarLinhasTEF

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <dti></dti> e <hri></hri> - agora estão imprimindo data e hora corretamente mesmo com a configuração DUAL\FormataTexto informando DLL.

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - Nova tag <cespl>x</cespl> - Criada tag para alterar o espaçamento entre as linhas impressas.

Nova Implementação - confIndiceCadastrar_ECF_Daruma - criado método que permite cadastrar um novo totalizador na impressora, informando a posição que ele deve ocupar.

-----------------------------------------------------------------------
Data de liberação: 06/05/2013

Versão Arquivo: 07.23.50

Versão do Produto: ECF 8.15, DUAL 4.72, MODEM 3.37, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - iCFVender_ECF_Daruma - alteração na rotina interna que verifica o status da impressora, pois no caso de teste com a impressora desligada, estava causando demora anormal.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0000 - Incluso novo código de versão (007) para o campo 02, que corresponde ao período de 2013.

Implementação - Rotina de retorno dos métodos - Feito ajuste para não ter alguns casos em que o retorno não é o esperado, para quando <RetornaAvisoErro> está ligado e impressora é desligada no meio de um processo.

Implementação - Tratamento de Impressora sem papel - quando Impressora FS600 e sem papel na hora de vender item estava retornando valor errado no retorno dométodo.

Implementação - OBSERVER - Nivelamento dos métodos do Observer com a DarumaFramework.dll


-----------------------------------------------------------------------
Data de liberação: 17/04/2013

Versão Arquivo: 07.23.45

Versão do Produto: ECF 8.12, DUAL 4.72, MODEM 3.37, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - Ajuste na rotina de verificação de fim de papel, estava causando retorno incorreto no retorno do método quando impressora fica sem papel mas ligada.

-----------------------------------------------------------------------

Data de liberação: 11/04/2013

Versão Arquivo: 07.23.44

Versão do Produto: ECF 8.11, DUAL 4.72, MODEM 3.37, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - iCFVenderResumido_ECF_Daruma - Corrigido problema de Access Violation dependendo da aliquota informada.

Implementação - rGerarRelatorio_ECF_Daruma - Registro 60D - campo valor da mercadoria, quando de item cancelado estava ficando com valor errado, considerando unitario e do item (quantidade X valor) 

Implementação - Auditoria da Geração de Arquivos - quando havia leitura da MFD, o log estava ficando com espaços em branco nas linhas desnecessáriamente

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM - quando havia um evento não esperado no binário baixado da impressora, estava retornando -99, mesmo com os binários Ok.

Implementação - XML/ Registro - Criada nova tag de configuração ECF\VelocidadeGeracao para indicar se a velocidade pode ser alterada na hora da geração de arquivo, fim de otimizar a geração, ou não.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe (NFPTDM e TDM) - Registros E02 e E11 quando o GT possui mais dígitos, estava sendo informado com valor errado no arquivo, ajuste realizado para gerar informação corretamente.


Implementação - Observer - método rNivelSinalRecebido_MODEM_DarumaFramework - Ajuste para esperar o tipo de parametro correto, não retornando mais erro neste método.

Implementação - Rotina de compactação - Ajuste na Rotina de compactação para quando utilizando a USB, e a camada de comunicação retornar 0 o retorno ser tratado, assim como -12 e -6.

Implementação - Retorno de Aviso - Adicionado o aviso 41, que passa 2 informações de aviso: Compactando e Papel Acabando.


-----------------------------------------------------------------------
Data de liberação: 02/04/2013

Versão Arquivo: 07.23.34

Versão do Produto: ECF 8.03, DUAL 4.72, MODEM 3.36, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - rReceberSms_MODEM_DArumaFramework - estava causando erros apenas quando utilizado via Observer.

Implementação - rGerarRelatorio_ECF_Daruma - TDM e MFD - Registro tipo E02 - Em alguns casos estava ficando com Razão Social errada, sem os dois primeiros caracteres.

Implementação - Avisos e Erros - Feito ajuste na rotina que verifica os retornos da impressora para retornar corretamente mesmo quando impressora sem papel ou tampa aberta

Nova Implementação - XML/ Registro - ECF\CF\MascaraIdentificaConsumidor - criada nova chave que permite habilitar a formatação automatica do formato do CNPJ/ CPF da identificação do consumidor, conforme legislação PAF e DF.

Nova Implementação - rListarSMSTelefone_MODEM_DarumaFramework - criado método que lista apenas os SMSs contidos no chip, de um número especifico.

Nova Implementação - OBSERVER - Criada nova função exclusiva para que está utilizando o Observer, que retorna a versão do executável Observer.

Nova Implementação - Horario de Verão - Criadas 2 novas chaves de configuração no arquivo XML/ Registro, <HorarioVeraoInicio></HorarioVeraoInicio>, <HorarioVeraoFim></HorarioVeraoFim>, que servem para indicar datas em que a DLL automaticamente, no seu startup, coloca ou retira a impressora fiscal do horario de verão.

-----------------------------------------------------------------------

Data de liberação: 19/03/2013

Versão Arquivo: 07.23.25

Versão do Produto: ECF 7.98, DUAL 4.72, MODEM 3.35, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - rGerarRelatorio_ECF_Daruma - Baixo Nível - não estava conseguindo realizar com sucesso o download de informações para o tipo Baixo Nível, quando solicitado um periodo maior que 1 dia.

Implementação - eBuscarPortaVelocidade - USB - Passou a realizar a busca com sucesso pela porta e velocidade.

Implementação - rGerarRelatorio_ECF_Daruma - Processo de leitura dos arquivos binarios - alteração em rotina interna que realiza a leitura dos arquivos binários, para  evitar estouros de memória.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe (MF, MFD, TDM, NFP e NFPTDM) - Feito ajuste para no registro E02, campo I.E. para informar apenas os números da Inscrição Estadual, pois o campo é numérico, assim como já era feito com o CNPJ.

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - Criada nova subtag para QrCode - <lmodulo>x</lmodulo> que indica a largura do módulo para o QrCode que vai ser impresso.
-----------------------------------------------------------------------

Data de liberação: 08/03/2013

Versão Arquivo: 07.23.18

Versão do Produto: ECF 7.93, DUAL 4.71, MODEM 3.35, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - rGerarRelatorioOffline_ECF_Daruma - Quando solicitado mais de um tipo de arquivo e dentre eles contém MF, estavamos tendo a geração apenas do arquivo MF. Agora está gerando todos os solicitados.

Implementação - DUAL - Comunicação - alterada a configuração do modo de abertura da comunicação socket (ip).

Implementação - iCFEfetuarPagamento_ECF_Daruma - passou a não tratar mais o sinal de '-' enviado antes do valor do pagamento, retornando erro quando ele ocorrer, isso porque a impressora não aceita valor negativo como pagamento. O erro retornado quando ocorrer valor negativo no pagamento será de que o campo só aceita valores numéricos.

Implementação - rGerarRelatorio_ECF_Daruma - LMFS - intervalo de CRZ - quando solicitado arquivo do tipo LMFS por intervalo de CRZ o arquivo não estava sendo gerado, já está ok.

-----------------------------------------------------------------------
Data de liberação: 05/03/2013

Versão Arquivo: 07.23.13

Versão do Produto: ECF 7.89, DUAL 4.70, MODEM 3.35, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - iRGImprimir_ECF_Imprimir - ajustes na rotina de impressão do gerencial, para quando a chave AguardarImpressão estiver ligada.

Implementação - rGerarRelatorio_ECF_Daruma - ajuste na rotina para que não retorne mais -99 quando os parametros foram informados corretamente.

-----------------------------------------------------------------------
Data de liberação: 28/02/2013

Versão Arquivo: 07.23.11

Versão do Produto: ECF 7.87, DUAL 4.70, MODEM 3.35, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - eBuscarPortaVelocidade - ajuste na rotina do método para iniciar a busca pela velocidade indicada no xml, pois isso não estava acontecendo no caso de velocidade 9600. A mesma rotina é usada no startup da DLL.

Implementação - iRGImprimir_ECF_Daruma - alterado o índice chamado internamente pela dll para checar se é necessário abrir o gerencial padrão ou não. O índice correto é o 57 que retorna o tipo de documento aberto.

Implementação - rGerarRelatorio_ECF_Daruma - Baixo Nível - Não estavam sendo gerados arquivos de baixo nível e a DLL dava retorno de OK.

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - Registro 60M - campos 07 e 08 - passou a considerar documentos como Leitura X e Redução Z para indicar o COO inicial e final do dia, e não apenas os COOs de cupons fiscais.


-----------------------------------------------------------------------
Data de liberação: 15/02/2013

Versão Arquivo: 07.23.06

Versão do Produto: ECF 7.83, DUAL 4.70, MODEM 3.34, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - rGerarRelatorioOffline_ECF_Daruma - MF - Não precisa mais do .mfd para conseguir gerar o arquivo MF, visto que para ele as informações do .mdf não são utilizadas.

Implementação - rGerarRelatorio_ECF_Daruma - RZ e ESPELHO com "+[DATA]+[HORA]" - Voltou a gerar corretamente o nome do arquivo quando solicitado a Data e Hora de geração.

-----------------------------------------------------------------------
Data de liberação: 06/02/2013

Versão Arquivo: 07.23.04

Versão do Produto: ECF 7.81, DUAL 4.70, MODEM 3.34, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - Geral - Ajuste feito na rotina de controle automatico para melhorar desempenho da DLL.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60I - campo 11 e campo 13 - Valor Base de Cálculo, não deve ter valor (ficar zerado) quando aliquotas forem: F,N ou I, o mesmo vale para o campo valor do ICMS.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60I - Quando há cancelamento do cupom e em item do mesmo, não gera mais 60I em duplicidade, nem com valores multiplicados.

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM - Registro E12 - Ajuste para gerar o E12 de dias com Redução Z sem movimento, mas com documentos impressos, por exemplo LeituraX. 

-----------------------------------------------------------------------
Data de liberação: 25/01/2013

Versão Arquivo: 07.23.01

Versão do Produto: ECF 7.78, DUAL 4.70, MODEM 3.34, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rRetornaInformacao_ECF_Daruma - passou a retornar informação quando a chave <RetornarAvisoErro> esta com valor 1 e o ECF esta com o led Erro ligado.

Implementação - rInfoEstendida_ECF_Daruma - ajuste realizado para retornar a informação do método quando a impressora entrar em erro durante a emissão do documento.

Nova Implementação - XML - criada a tag <PathBibliotecasAuxiliares> que permite o usuario configurar o diretorio que ficarão as bibliotecas auxiliares (lebin, LeituraMFDBin e QrCode_DarumaFramework).

IMPORTANTE - Usar a lebin vs 0.8.8.0 a partir desta versão da DarumaFramework 07.23.01 devido ajustes da nova implementação.

-----------------------------------------------------------------------


DarumaFramework.dll

Data de liberação: 23/01/2013

Versão Arquivo: 07.22.15

Versão do Produto: ECF 7.76, DUAL 4.70, MODEM 3.34, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM - feito ajuste para geração do registro E12 quando houver emissão de ReduçãoZ sem movimento.

Implementação - rGerarRelatorio_ECF_Daruma - MF - ajuste realizado no registro E12 campo 11 com relação a hora informada no rodapé da ReduçãoZ emitida.

Implementação - rGerarRelatorio_ECF_Daruma - MFD - quando o arquivo é gerado por COO passou a informar a data do movimento no registro E01 campos 15 e 16.

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <qrcode> - ajustes realizados para que a tag <qrcode> aceite as configurações de centralização <ce> e alinhamento a direita <ad>. Necessário atualização da impressora DR700.

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <correcao> - essa tag permite configurar o nível de correção do QrCode e funciona em conjunto com a tag <qrcode>. Necessário atualização da impressora DR700.

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <sbmp> - permite salvar o QrCode em arquivo no formato bmp no path indicado no parametro e funciona em conjunto com a tag <qrcode>. 

Nova Implementação - eGerarQrCodeArquivo_DUAL_DarumaFramework - esse método permite gerar a imagem do QrCode no path passado como parametro pelo usuário.

Nova Implementação - XML - DUAL\EndPortaParalela - criada a tag <EndPortaParalela>, essa tag foi criada para contornar o problema de quando a porta paralela do cliente não segue os endereços padrões que a norma IEEE 1284 mostra.

-----------------------------------------------------------------------

DarumaFramework.dll

Data de liberação: 11/01/2013

Versão Arquivo: 07.22.07

Versão do Produto: ECF 7.71, DUAL 4.67, MODEM 3.34, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rTipoUltimoDocumentoInt_ECF_Daruma - Feito ajuste no método quando encerramento do CCD for realizado pelo método iTEFFechar_ECF_Daruma.

Nova Implementação - XML - ECF\REDUCAOZ\Relatorios + rGerarRelatorio_ECF_Daruma - Criado novo tipo [DATA] e [HORA] que possibilita a geração dos relatorios com Data e Hora na nomenclatura do arquivo.

Nova Implementação - eBuscarPortaVelocidade_DUAL_DarumaFramework - método criado para encontrar a porta e a velocidade configurada na DUAL.

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <confgui> - nova tag criada configurar o tipo de corte Parcial ou Total. 

-----------------------------------------------------------------------


DarumaFramework.dll

Data de liberação: 04/01/2013

Versão Arquivo: 07.22.01

Versão do Produto: ECF 7.69, DUAL 4.63, MODEM 3.33, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - Registros E15 e E16 - ajustes na geração do registro E15, para quando item possui desconto, e ajustes na geração dos registros E16 para indicar corretamente a denominação (campo 11) de alguns tipos de documento, como sangria por exemplo.

Implementação - iCFAbrirCupom_ECF_Daruma - Ajuste feito para poder passar parametros com valor nulo e também para quando informar apenas o CPF não imprimir os campos Nome e Endereço no cupom fiscal.

Implementação - iMFLer_ECF_Daruma e iMFLerSerial_ECF_Daruma - Feito ajuste na rotina que verifica o término da impressão para não causar erro de Relógio Inoperante quando estes métodos são utilizados na sequencia.

Nova Implementação - rGerarRelatorio_ECF_Daruma - inclusão de novo tipo de arquivo, ESPELHO que possibilita solicitar o arquivo espelho da MFD de movimentos já encerrados.

Nova Implementação - iRGImprimirArquivo_ECF_Daruma - criado novo método que realiza a impressão de um arquivo texto dentro do relatório gerencial.


------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 20/12/2012

Versão Arquivo: 07.21.15

Versão do Produto: ECF 7.62, DUAL 4.63, MODEM 3.32, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - eAguardarCompactação - feito ajustes em método interno da DLL para que a mesma não tente enviar e receber informação da impressora no mesmo segundo em que a impressora retornou a resposta do ultimo comando, fazendo com que não ocorra retorno de Relógio Inoperante, isso acontece porque a MFD da impressora não aceita 2 documentos gravados no mesmo segundo.

Implementação - rGerarRelatorio_ECF_Daruma - Registro 60A - passou a gerar apenas um registro 60A para ISS, fazendo com que os valores somados batam com o 60M.

Implementação - eBuscarPortaVelocidade - Ajustes para retornar erro corretamente quando impressora não está conectada ao computador e também foram resolvidos alguns casos em que a impressora não estava sendo encontrada.

Implementação - regRetornarValorChave_Daruma - Resolvido problema de chama-lo mais de uma vez seguida e causar erro na aplicação.

Implementação - XML - ECF\ControleAutomatico - Quando habilitado em alguns métodos a liberação da porta não estava acontecendo, agora está ok.

Implementação - rCompararDataHora_ECF_Daruma - Ajustado para não calcular errado com as impressoras em horario de verão.

------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 14/12/2012

Versão Arquivo: 07.21.05

Versão do Produto: ECF 7.53, DUAL 4.63, MODEM 3.32, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60D - Feito ajuste na geração deste registro para quando houver apenas 1 cancelamento de um código de item o dia, gerar as informações corretamente, independente de quantidade cancelada.

Implementação - tEnviarSms_MODEM_DarumaFramework - correção do índice para Observer, o correto é 3068.

Nova Implementação - XML - ECF\CF\NotaLegal - Criados mais 2 (opção 3 e 4) valores para que as mensagens sejam incluidas apenas no final da mensagem promocional.

Nova Implementação - XML - ECF\CF\TorpedoPremiadoParaiba - Criada opção 2 para que a mensagem da Nota Paraibana seja impressa apenas no final da mensagem promocional.

Nova Implementação - XML - Criada nova chave para modem MODEM\ReceberNumeroChamada, que permite ativar o recurso de receber o número que está ligando para o SIMCard.

Nova Implementação - rRetornarNumeroChamada_MODEM_DarumaFramework - método que retorna numa string por referencia o número que está ligando para o SIMCard.

------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 10/12/2012

Versão Arquivo: 07.21.02

Versão do Produto: ECF 7.51, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma e eRSAAssinarArquivo_ECF_Daruma - Combinação do uso destes dois métodos juntos em sequencia, não retorna mais erro -99.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe 17/04 - Registros E15 - Agora os registros contém informações de todos os tipos de desconto e acrescimo (valor ou percentual, no item diretamente ou depois da venda do item).

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 04/12/2012

Versão Arquivo: 07.20.08

Versão do Produto: ECF 7.49, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - Ato Cotepe 17/04 (NFP e NFPTDM) - Feito ajuste na separação dos dias de movimento, para que quando em horario de verão não tenha movimento sendo inserido em arquivo errado.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 30/11/2012

Versão Arquivo: 07.20.07

Versão do Produto: ECF 7.48, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - iReducaoZ_ECF_Daruma - revisadas rotinas de geração de arquivos, que são configuradas no XML através das chaves dentro de ECF\REDUCAOZ para que gere apenas os arquivos solicitados e quando solicitados.

Nova Implementação - eWsStatus_ECF_Daruma - criado método de verificação de Status do WebService Daruma - recurso para quem deseja enviar dados pro WebService, que são usados no aplicativo Win8 de nome Cupom Fiscal Urmet Daruma.

Nova Implementação - eWsEnviarCupom_ECF_Daruma - criado método que envia alguns dados do Cupom Fiscal para o WebService Daruma.

Nova Implementação - XML - ECF\HabilitaNotificacaoWS - criada chave que habilita/ desabilita envio automatico de dados do cupom fiscal para o Web Service Daruma.

Nova Implementação - XML - WSWIN8 - criado subgrupo de configurações do WebService Daruma, que tem relação com o aplicativo Win8 - Cupom Fiscal UrmetDaruma. As chaves deste subgrupo são: NomeFantasia, SyncAssync e IndiceSegmento.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 28/11/2012

Versão Arquivo: 07.20.05

Versão do Produto: ECF 7.47, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Revisão na rotina de geração dos registros 60D, para gerar registros com a informação de Cancelamentos;

Implementação - rGerarRelatorio_ECF_Daruma + eRSAAssinarArquivo_ECF_Daruma ou rCalcularMD5_ECF_Daruma - feito ajuste para quando usadas combinações de sequencias destes métodos, não causar erros na aplicação.

Nova Implementação - rGerarRelatorio_ECF_Daruma - Criado novo tipo "RZ" que gera um arquivo texto com dados das reduções Z referentes ao período solicitado.

------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 20/11/2012

Versão Arquivo: 07.19.10

Versão do Produto: ECF 7.41, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - iTEF_ImprimirResposta_ECF_Daruma e iTEF_ImprimirResposta_ECF_Daruma - feita adaptação para imprimir o texto do registro 715-XXX que vem em alguns IntPos.001 de resposta.
 
Implementação - rGerarRelatorio_ECF_Daruma - SPED - Quando utilizado pelo observer o recurso de informar alíquota do PIS e COFINS, apenas para o Observer passa a ser obrigatorio o caracter separador "|" para as aliquotas em questão. Para quem utiliza apenas DLL, pode ser usado o ";" conforme já é aceito, ou então o "|".

------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 12/11/2012

Versão Arquivo: 07.19.07

Versão do Produto: ECF 7.39, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - passou a gerar registro 60D de cancelamento com o campo 09 preenchido como "CANC".


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 06/11/2012

Versão Arquivo: 07.19.05

Versão do Produto: ECF 7.37, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04


Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - no registro C460, campo 09 - número documento identificação Consumidor agora é preenchido quando há apenas esta identificação no cupom.

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <ft> - configura a tabulação que será utilizada já na impressão em que foi alterada e grava informação no xml.

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <a> - tag utilizada para fazer com que a DLL aguarde o término daquela impressão para dar o retorno do método.


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 25/10/2012

Versão Arquivo: 07.19.01

Versão do Produto: ECF 7.36, DUAL 4.61, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04


Implementações/ Novas Implementações:

Nova Implementação - XML - ECF\CF\NotaLegal - Criada chave para atender legislação do programa Nota Legal do Distrito Federal, atendendo também requisito do PAF, que replica o mesmo que o Estado do DF pede na emissão de cupons.

Nova Implementação - XML - ECF\CF\TorpedoPremiadoParaiba - Criada chave para atender a nova legislação do estado da Paraíba, que solicita impressão de mensagem e código específico no Cupom Fiscal, esta chave atende também o PAF-ECF, que replica esta mesma solicitação.


------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 18/10/2012

Versão Arquivo: 07.18.01

Versão do Produto: ECF 7.35, DUAL 4.59, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - Geração de arquivo quando configuração ECF\REDUCAOZ\Relatorios contém NFPTDM - quando não possui data preenchida no periodo, considera a Data do Movimento da RZ para geração do arquivo;

Implementação - eRSAAssinarArquivo_ECF_Daruma - quando logo após ele abre um cupom, não está mais causando erro;

Implementação - eRSAAssinarArquivo_ECF_Daruma - com a impressora desligada estava demorando mais para responder, agora está com comportamento igual;

Implementação - rGerarRelatorio_ECF_Daruma - não estava retornando a velocidade para 115200, quando a impressora está em velocidade diferente desta. O comportamento correto agora está OK, após a geração volta para a velocidade original de uso;

Implementação - rStatusImpressora_DUAL_DarumaFramework - Correção na rotina de verificação, para não repetir verificação internamente na DLL quando retorno anterior foi de OK. (Esta modificação foi feita para melhorar o tempo resposta dos comandos de Impressão);

Implementação - USB - feito ajuste em alguns métodos, quando impressora desligada, mas ligada pelo cabo USB não estava retornando -6 que é "Impressora Desligada"

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - nova tag criada para impressão de código tipo Qr Code: <qrcode></qrcode>;

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - nova tag criada para impressão de imagem tipo bmp sem carrega-la na memoria da impressora: <ibmp></ibmp>;

Nova Implementação - iImprimirBMP_DUAL_DarumaFramework - método criado para fazer impressão de uma imagem bmp diretamente na bobina, sem carregar na memoria da impressoa - atende apenas impressoras com Modo Gráfico (DR700M, DR700H, DR700ETH);

Nova Implementação - rGerarMapaResumo_ECF_Daruma - método criado para gerar um arquivo texto com as informações referentes à última Redução Z, para o preenchimento do Mapa Resumo.

OBS: A partir desta versão foi acrescentada uma nova biblioteca auxiliar ao pacote, que é utilizada pela DarumaFramework.dll para geração de Qr Code.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 10/10/2012

Versão Arquivo: 07.17.02

Versão do Produto: ECF 7.30, DUAL 4.59, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Feito ajuste para calcular corretamente os valores de aliquotas quando temos desconto e acrescimo no final do mesmo cupom. 

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag  D-HTML de uso da tabulação <tb></tb> passou a funcionar corretamente

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - criada nova tag D-HTML para indicação de margem a ser obedecida pelo texto. Tag <mg>E;D</mg> onde E é o valor da margem esquerda e D o valor da margem direita. Estes valores são válidos apenas na execução onde são enviados.

------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 18/09/2012

Versão Arquivo: 07.14.04

Versão do Produto: ECF 7.06, DUAL 4.53, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - ATO COTEPE 17/04 - Registro E01 estava sendo gerado sem número sequencial do ECF.

Implementação - rGerarRelatorio_ECF_Daruma - ATO COTEPE 17/04 - Registro E06 - O campo 8 (símbolo da Moeda) não era preenchido, agora está sendo lido corretamente da impressora.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C470 - Quando o desconto é dado diretamente no item e em percentual, não estava sendo considerado e aplicado ao registro.

Implementação - Startup DLL com ECF - Na rotina de encontrar ECF, ao invés de buscar estava alterando a velocidade da impressora, não realiza mais esta aletração, apenas busca qual é a velocidade da impressora.

Implementação - rRetornarInformacaoSeparador - Não estava trazendo corretamente as informações do índice 169 - meios de pagamento,mais especificamente do primeiro meio de pagamento que é sempre Dinheiro.

Implementação - rCMEfetuarCalculo_ECF_Daruma - Agora aplica as regras de arredondamento nos valores calculados, fazendo com que o cálculo bata com o da impressora.

Nova Implementação - MODEM\ControleAutomatico - Criada chave para esta configuração no XML. O Controle Automatico quando ligado, faz com que a DLL abra e feche a porta de comunicação com o modem a cada envio de comando, deixando assim a porta disponivel quando não está fazendo nenhuma comunicação com ele. Se tiver duas aplicações com esta mesma configuração habilitada, será possível que elas alternem no envio de comandos para o Modem.

Nova Implementação - Definição de Produto - Agora a DLL consegue trabalhar com mais de um produto, sem que ele precise ser setado através do método eDefinirProduto_Daruma, isso porque a partir desta versão ela identifica pela chamada do método qual é o produto utilizado não importando qual o valor que ficou configurado em START\Produto que é considerado apenas no startup da DLL. 

Nova Implementação - rReceberIDSIM_MODEM_DarumaFramework - Criado método que obtém o número de identificação do chip que está sendo utilizado. Cada chip tem um número de identificação diferente, que não é o númedo de discagem e envio de SMS.



------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 29/08/2012

Versão Arquivo: 07.12.22

Versão do Produto: ECF 6.97, DUAL 4.52, MODEM 3.29, TA2000 4.05, GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - eDefinirProduto_Daruma - passou a aceitar o parametro como " " (espaço em branco) a DLL já aceitava, mas o método não estava efetuando esta alteração.

Implementação - regRetornarValorChave - agora retorna exatamente o que está no registry sem tirar os espaços em branco, para atender os casos de espaço em branco no produto.

Implementação - rInfoEstendida3_ECF_Daruma - ajuste no método para não causar erros de comunicação quando usado sempre depois da venda do item.

Implementação - ECF - Melhorada rotina que verifica modelo e versão do ECF para mostrar aviso caso FS600 de versão inferior ou igual a 01.04.00.

Implementação - Observer - Ajustes na dll para gravação do log do observer mais limpa.


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 27/08/2012

Versão Arquivo: 07.12.17

Versão do Produto: ECF 6.94, DUAL 4.52, MODEM 3.29, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - Auditoria_ECF.TXT - acrescentado o valor da resposta recebida dos métodos rInfoEstendida_ECF_Daruma, rInfoEstendida1_ECF_Daruma, rInfoEstendida2_ECF_Daruma, rInfoEstendida3_ECF_Daruma, rInfoEstendida4_ECF_Daruma, rInfoEstendida5_ECF_Daruma.

Implementação - iCFEfetuarPagamentoFormatado_ECF_Daruma - Passou a testar o tamanho do parametro que informa o Meio de pagamento quando o mesmo é transformado para inteiro, assim não confunde por exemplo: "15 dias" com a forma de índice 15.

Implementação - rInfoCNF_ECF_Daruma - Ajuste para separar os totalizadores corretamente, quando a descrição continha espaço em branco no meio, estava retornando errado.

OBS: A partir desta versão o pacote da DLL está saindo com a versão 0.99.76.1 da LeituraMFDBin.dll - Passou a gerar arquivo mesmo de dia sem movimento, apenas com as informações da impressora no dia. E também corrige problemas na geração caso MFD tenha perdido ponteiro de algum cupom.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 21/08/2012

Versão Arquivo: 07.12.11

Versão do Produto: ECF 6.90, DUAL 4.51, MODEM 3.29, TA2000 4.05 GENERICO 1.01, DSP 1.04

Implementações / Novas Implementações: 

Implementação - rGerarRelatorioOffline_ECF_Daruma - Alterada lógica de tratamento de nulos no arquivo binário da MFD. Em alguns casos quando ocorreu carga de bitmap (por exemplo) estavam ocorrendo erros por existirem estes nulos no arquivo binário.

Implementação - iCFEfetuarPagamentoFormatado_ECF_Daruma - alterada logica que encontra o meio de pagamento para quando passado "30 dias", estava retornando erro de meio de pagamento inexistente, mesmo quando pagamento cadastrado no ecf.

Implementação - regAlterarValor_DAruma - passou a aceitar também espaço em branco como parametro (" ") para que a DLL não ocupe nenhuma porta quando estiver com esta configuração.

Nova Implementação - rReceberNotificacao_MODEM_DarumaFramework - Criado método que permite solicitar e receber notificação da operadora.

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 15/08/2012

Versão Arquivo: 07.12.08

Versão do Produto: ECF 6.88, DUAL 4.51, MODEM 3.28, TA2000 4.05 GENERICO 1.01, DSP 1.04

Implementações / Novas Implementações: 

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Ajuste na regra de arredondamento do campo 07 do registro C490.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Campo 2 do registro 0000, código que indica versão do layout, alterado de 004 para 006 que é o valor válido a partir de 01/07/2012.

Implementação - confModoPaf_ECF_Daruma - Não estava aceitando mais de uma impressora cadastrada no arquivo auxiliar criptografado, quando já habilitado, apresentava erro do método -113.

Implementação - tEnviarSmsOperadora_MODEM_DarumaFramework - Aumentado timeout do comando para não causar erros quando Chip de outro DDD demora mais para sincronizar com a rede.

Nova Implementação - rLerSmsConfirmacao_MODEM_DarumaFramework - Criado método que possibilita indicar o índice do Sms e ver se a confirmação de entrega do mesmo foi recebida.

Nova Implementação - XML - MODEM\NumeroTentativas - Criada esta nova tag para Modem, onde indicará o número de vezes que a propria DLL tentará enviar o SMS caso o comando de envio retorne ERRO.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 09/08/2012

Versão Arquivo: 07.11.00

Versão do Produto: ECF 6.85, DUAL 4.50, MODEM 3.22, TA2000 4.05 GENERICO 1.01, DSP 1.04

Implementações / Novas Implementações: 

Implementação - Retirado tratamento de versão do firmware dos módulos DUAL, TA2000 e MODEM.

Implementação - rInfoEstendida_ECF_Daruma - índice 2 quando solicitado logo após cancelamento de cupom (que estava aberto ainda) passou a retornar valor do CCF que é guardado pela DLL e não pela impressora.

Implementação - rGerarRelatorio_ECF_Daruma - feita modificação na leitura dos arquivos binários da memória, para resolver problemas quando existem relatórios gerenciais grandes. 
**Importante: para esta implementação ter 100% de efeito utilize a lebin.dll também atualizada - versão 0.8.7.2. 
 
Implementação - ECF - regAlterarValor_DarumaFramework - quando usado para alterar velocidade da impressora fiscal no xml, altera também a velocidade da impressora.

Nova Implementação - rCompararDataHora_ECF_Daruma - criado método que compara Data/Hora do computador com Data/Hora da Impressora, retornando em minutos a diferença entre eles.

Nova Implementação - rInfoCNF_ECF_Daruma - criado método que lê todos os totalizadores não fiscais da impressora e nos retorna em uma única string, separando os valores pelo caractere separador.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 01/08/2012

Versão Arquivo: 07.10.00

Versão do Produto: ECF 6.80, DUAL 4.50, MODEM 3.22, TA2000 4.05 GENERICO 1.01, DSP 1.04

Implementações / Novas Implementações:

Implementação - XML/ Registy - Quando estiver com Tipo Registro = 0 que é o valor default criado pela DLL, ela não irá criar e nem usar informação do Registry caso exista. Será utilizado apenas XML.

Implementação - iImprimirTexto_DUAL_DarumaFramework - alteração no funcionamento da TAG <tc>C</tc> que ao ser enviada no final de um bloco não estava sendo executada por completo, fazendo com que o conteúdo seguinte a ela (no mesmo bloco) não fosse impresso. 

Implementação - eBuscarPortaVelocidade_ECF_Daruma - Quando utilizada a USB da impressora não estava localizando a impressora.

Implementação - rGerarRelatorio_ECF_Daruma - feita modificação na leitura dos arquivos binários da memória, para resolver problemas quando existem cupons grandes (mais de 50 itens). **Importante: para esta implementação ter 100% de efeito utilize a lebin.dll também atualizada - versão 0.8.7.1.
 
Implementação - rGerarRelatorio_ECF_Daruma - SPED - Retirado os espaços em branco do inicio e fim do campo CNPJ e Nome do Cliente do registro C460.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - perfil B - revista a rotina de montagem do arquivo pois em alguns casos estava sendo repetido o registro C425 de um mesmo item.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C490 estava colocanco o valor 090 no campo 2 fazendo com que a aliquota acima de 20,00% não fosse informada corretamente neste registro.

Nova Implementação - DUAL - nova chave criada no XML <FormataTexto>, que irá indicar se os comandos de formatação utilizados no método iImprimirTexto_DUAL_DarumaFramework para Centralizar, Alinhamento à Direita e Italico serão os comandos nativos das impressoras (de versão igual ou superior à 2.20.00) ou serão feitos pela DLL como sempre foi (menos itálico que não possuimos nas versões anteriores à 2.20.00)

Nova Implementação - rTotalSms_MODEM_DarumaFramework - criado método que retorna em inteiro qual o número de Mensagens contidas no chip, de acordo com o tipo de mensagem solicitada: Todas, Lidas e Não Lidas.

Nova Implementação - ECF - Quando ECF for FS600 e versão igual ou menor a 01.04.00, a DLL mostrará logo no startup a mensagem solicitando a atualização da impressora, e não será possível nem ler informações desta impressora, devido a versão não ser compatível com a DarumaFramework.

Nova Implementação - rGerarRelatorio_ECF_Daruma - SPED - Quando solicitada geração de SPED agora teremos como saída do método 3 arquivos: SPED_DRM (contendo todos os registros), SPED_DRM_A (perfil A), SPED_DRM_B (perfil B). Antes tinhamos apenas o SPED_DRM e SPED_DRM_B.
------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 10/07/2012

Versão Arquivo: 07.05.16

Versão do Produto: ECF 6.64, DUAL 4.43, MODEM 3.21, TA2000 4.05, GENERICO 1.01, DSP 1.04

Implementações / Novas Implementações:
 
Implementação - Startup DLL - Agora quando a chave ECF\EncontrarECF estiver =1 a DLL está buscando a velocidade da impressora corretamente.

Implementação - arquivo SPED - Passou a calcular os valores de PIS e COFINS quando a porcentagem é menor que 01,00%

Implementação - arquivos AtoCotepe (NFP, NFPTDM, MF, MFD e TDM) - Na linha E01 agora informa corretamente o número sequencial do ECF que estava aparecendo sempre como 001.

Implementação - Startup DLL  - Quando XML já está configurado para produto = DUAL, não é mais necessário chamar o eDefinirProduto para que funcione a comunicação.

Implementação - regAlterarValor_Daruma - Quando produto = DUAL, e utilizamos o regAlterarValor para configuração da Velocidade não é mais necessário chamar novamente o comando eDefinirProduto_Daruma para que funcione a comunicação.

Implementação - arquivo Sintegra - quando Sintegra Federal, não gera mais o registro 60R de códigos de produto com quantidade e valores zerados, pois estava causando "Alerta". Para Sintegra PR (Paraná) o registro permanece para não gerar erros.

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 03/07/2012

Versão Arquivo: 07.05.07

Versão do Produto: ECF 6.57, DUAL 4.42, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - rGerarRelatorio_ECF_Daruma - Arquivos AtoCotepe (NFP, NFPTDM, MFD, TDM) - não considera mais os caracteres Nulos enviados na identificação do consumidor, o que causava problemas de falta de dados no arquivo, não validando o mesmo.

Implementação - Observer - Adicionados índices para Observer, dos comandos: rLerDecimaisInt_ECF_Daruma, rLerDecimaisStr_ECF_Daruma, regCFCupomAdicionalDllConfig_ECF_Daruma, eDefinirModoregistro_Daruma, tEnviarDadosGprs_MODEM_DarumaFramework, eReiniciar_MODEM_DarumaFramework.

Implementação - Observer - Alterado local do comando eDefinirProduto_Daruma, agora fica no grupo de comandos Geral.

Implementação - iEnviarBMP_DUAL_Daruma - agora está ok para comunicação Paralela também.

Implementação - Comandos de impressão para DUAL e ECF - passou a aceitar o texto "NULL" em qualquer parte do parametro. Não causando mais Erro no verificador de comunicação.

Nova Implementação - rRetornarVendaLiquida_ECF_Daruma - Criado método que retorna o valor de Venda Líquida atual.


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 25/06/2012

Versão Arquivo: 07.05.02

Versão do Produto: ECF 6.54, DUAL 4.40, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - iImprimirTexto_DUAL_Daruma - Criada a tag <xl> para fazer fonte Extra Grande. Formatação usada isoladamente, não aceita outras formatações junto com ela. 

Implementação - Auditoria_ECF - retirado registro de método da DUAL que não é utilizado quando ECF.

Implementação - Modificação na rotina interna de Aguardar Compactação, onde passamos a aguardar o fim de impressão e não o retorno de Data/ Hora da impressora para saber se ela está disponível e terminou de compactar.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 20/06/2012

Versão Arquivo: 07.03.05

Versão do Produto: ECF 6.52, DUAL 4.34, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 

Implementação - Tag DUAL - <AtivaRota> - Para produto DUAL, quando chave <AtivaRota> está ativa (valor =1) não ocorrem mais problemas de comunicação, tanto ao abrir a aplicação quanto ao trocar de porta (rota) durante execução do aplicativo.

Implementação - Tag DUAL - <TamanhoBobina> - Está permitindo alterar configuração durante a execução, não precisa mais ser apenas com software fechado. Para alterar configuração utilize o método regAlterarValor_Daruma.

Implementação - regAlterarValor_Daruma e Tags ECF - <MensagemApl1> e <MensagemApl2> - Quando utilizado o método regAlterarValor_Daruma para configurar uma destas 2 mensagens, agora está alterando na hora no XML e na impressora.

Implementação - regAlterarValor_Daruma e Tag <Velocidade> - Quando utilizado o comando regAlterarValor_Daruma para mudar a tag <Velocidade> voltou a alterar no XML e também na impressora.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 08/06/2012

Versão Arquivo: 07.03.04

Versão do Produto: ECF 6.51, DUAL 4.32, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - Modificada rotina interna da DLL de Aguardar Compactação, para que ao invés de aguardar mudança do relógio da impressora, aguarde mudança do relógio do pc 1,5 segundos.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 06/06/2012

Versão Arquivo: 07.03.02

Versão do Produto: ECF 6.49, DUAL 4.32, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - rLerArqRegistroPAF_ECF_Daruma - Agora possibilita identificação de mais de um ECF por arquivo.

Implementação - rRetornarInformacao_ECF_Daruma -  Alteração para linguagens como VB6 e VisualFoxPro, para retornar mais de uma informação, quando solicitadas de uma vez só.

Implementação - Retorno de Aviso - Quando impressora com tampa aberta não estava retornando este aviso.

Implementação - iEstornarPagamento_ECF_Daruma - Quando o meio de pagamento é estornado agora também é gravado no XML, possibilitando o uso do comando iCCDAbrirPadrao, sem causar erros.

Implementação - rGerarRelatorio_ECF_Daruma - Arquivo MF quando gerado sozinho, agora apresenta o número sequencial do ECF no E01. 

Implementação - DarumaFramework - DLL não ocupa mais a porta quando ECF configurada para porta COM1 por exemplo e tiver um outro equipamento que não seja o ECF Daruma.

Implementação - Modificada rotina interna da DLL de Aguardar Compactação, para que ao invés de aguardar mudança do relógio da impressora, aguarde mudança do relógio do pc.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 24/05/2012

Versão Arquivo: 07.03.00

Versão do Produto: ECF 6.47, DUAL 4.32, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - XML - Alteração da tag <Bobina57mm> para <TamanhoBobina>, onde agora configuramos o número de colunas que serão utilizadas para impressão.

Implementação - Versão DLL - inclusão de File Version na descrição da DLL, pois quando consultada via comando não estava retornando corretamente, mesmo que no windows apareça a versão correta.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 23/05/2012

Versão Arquivo: 07.01.11

Versão do Produto: ECF 6.46, DUAL 4.30, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - eEjetarCheque_ECF_Daruma - Ajustado tempo de time out para 20 segundos. Este valor pode também ser determinado através da chave <TimeOutEjetarCheque> no xml.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 21/05/2012

Versão Arquivo: 07.01.10

Versão do Produto: ECF 6.45, DUAL 4.30, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - rGerarRelatorioOffline_ECF_Daruma - Não estava ocorrendo a geração dos arquivos do SPED, quando no parametro de tipo de relatório havia "+SPED[PIS;COFINS]" só estava gerando quando era o primeiro tipo solicitado.

Implementação - Ocupação de portas - Quando produto configurado para MODEM por exemplo, a dll não ocupa mais as outras portas definidas no XML quando é carregada. 

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 18/05/2012

Versão Arquivo: 07.01.08

Versão do Produto: ECF 6.43, DUAL 4.30, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 

Implementação - iCFEfetuarFormaPagamento e iCF EfetuarPagamentoFormatado - As formas de pagamento não precisam ser enviadas de forma identicas ao que está no ECF (letra maiuscula/ minuscula), a DLL só diferencia maiúsculas de minúsculas dos Meios de Pagamento quando existe letra acentuada nele. Exemplo: está cadastrado "Cartão" e for enviado "CARTÃO" sairá Dinheiro, já se for enviado "CARTãO" sairá a forma cadastrada na impressora Cartão;
 
Implementação - para JNA - Acertada as assinaturas para geracao dos wrappers.

Implementação - rRetornarInformacao_ECF_Daruma - Quando a impressora esta sem papel agora a resposta é retornada com sucesso. 

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 15/05/2012

Versão Arquivo: 07.01.03

Versão do Produto: ECF 6.39, DUAL 4.30, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 

Implementação - iImprimirTexto_DUAL_DarumaFramework - Estava apresentando erro quando enviado um buffer grande de impressão várias vezes seguidas.

Implementação - rConsultaStatusImpressora_DUAL_DarumaFramework - Agora está retornando os status normalmente quando impressora em erro ou fora de linha.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 10/05/2012

Versão Arquivo: 07.01.02

Versão do Produto: ECF 6.39, DUAL 4.29, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 

Implementação - iImprimirTexto_DUAL_DarumaFramework - TAG <txtl> - agora aceita a utilização de tags de formatação de texto dentro dela. 


Nova Implementação - rConsultaStatusImpressora_DUAL_DarumaFramework - Método que retorna alguns status da impressora, de acordo com o índice informado.

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 09/05/2012

Versão Arquivo: 07.01.01

Versão do Produto: ECF 6.39, DUAL 4.28, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - Auditoria_ECF - Quando a chave ECF\Auditoria está configurada para valor =2, o arquivo Auditoria_ECF.txt não estava informando a versão da biblioteca e dos produtos.

Implementação - para JNA - Para funcionamento correto do driver foi adicionado ByRef na assinatura dos métodos rCMEfetuarCalculo, rRGVerificarStatus e rRetornarVendaBruta.

Implementação - eDefinirProduto_Daruma - Soluicionado problema para utilização em Delphi, quando passamos o parametro do método em branco (nulo).

Nova Implementação - Geração de Arquivos - Quando o código do item é enviado para o ECF com espaços em branco na frente do código, os relatórios gerados que contenham essa informação agora apresentam o código sem os espaços em branco na frente.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 07/05/2012

Versão Arquivo: 07.00.38

Versão do Produto: ECF 6.38, DUAL 4.27, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - confCadastrar_ECF_Daruma - Quando existir alíquota 00,00% cadastrada no ECF, aceitar cadastro e leitura de outras alíquotas após ela. 

Implementação - rGerarRelatorio_ECF_Daruma - MFD, TDM, NFP, NFPTDM - Quando emitiu Sangria/ Suprimento e possui cupons com troco, o valor calculado para o campo 08 do registro E18 para TROCO estava saindo incorreto.

Implementação - confModoPAF - Quando ativado está encerrando a aplicação durante a geração do Espelho da Leitura da Memória Fiscal.

Nova Implementação - eDefinirProduto_Daruma - Permitir que o método eDefinirProduto_Daruma aceite NULO(VAZIO/ SEM NADA PREENCHIDO).

Nova Implementação - rGerarRelatorio_ECF_Daruma - SPED - implementação de parametros opcionais para PIS e COFINS, quando indicados o arquivo é gerado com os devidos valores nos registros C410, C425, C460 e C470.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 03/05/2012

Versão Arquivo: 07.00.34

Versão do Produto: ECF 6.34, DUAL 4.27, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - Quando tem uma forma de pagamento cadastrada com acento "Á Prazo" por exemplo, a dll só faz leitura das formas anteriores. Possibilitar leitura de todas as formas de pagamento.

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM - Registro E16, quando emiti um CCD não vem o GNF.

Implementação - rStatusGaveta_ECF_Daruma, rCFVerificarStatus_ECF_Daruma, em VB6 está apresentando problemas devido à diferença de tamanho da variável inteira em C e VB.

Implementação - iMFLerSerial_ECF_Daruma - Quando o confModoPAF_ECF_Daruma está ativado derruba a aplicação na geração do arquivo de Leitura Memoria Fiscal.

Implementação - regAlterarValor_ECF_Daruma - Quando altera MensagemAPL1 ou MensagemAPL2 o codigo de aviso sempre vem 1, sinalizando pouco papel mesmo com o ECF com a bobina cheia.

Implementação - iImprimirTexto_DUAL - problemas na impressão de buffer com mais de 1024 caracteres, usando porta paralela.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 18/04/2012

Versão Arquivo: 07.00.29

Versão do Produto: ECF 6.29, DUAL 4.26, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo gerado registro C490

Implementação - rGerarRelatorio_ECF_Daruma - TDM, MF - Não estão sendo mostrados todas as RZs do periodo solicitado, o problema ocorre quando a impressora tem mais de 2000 reduções na MF

Implementação - Quando usa o metodo iRGAbrir_ECF_Daruma com um nome que nao existe da erro porque nao existe, porem cadastra CupomAdicional no RG

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 11/04/2012

Versão Arquivo: 07.00.25

Versão do Produto: ECF 6.25, DUAL 4.26, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Quando a UF é PR os totais de registros que são informados no registro 090 esta vindo incorreto

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registros 60D e 60R estão vindo com valor negativo

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 05/04/2012

Versão Arquivo: 07.00.22

Versão do Produto: ECF 6.22, DUAL 4.26, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - iCFVender_ECF_Daruma - Quando envio a quantidade de 0,22 é impresso 0,022.

Implementação - rGerarRelatorio_ECF_Daruma - Quando temos estorno de pagamento no registro R07 do VIVANOTA esta saindo caracteres [NULL] no registro

Implementação - rGerarRelatorio_ECF_Daruma - VIVANOTA - Não esta sendo gerado o registro R06 para CNF Sangria e Suprimento

Implementação - rGerarRelatorio_ECF_Daruma - VIVANOTA - Registro R06 não esta trazendo o valor do GNF quando o documento é um CCD

Implementação - DUAL - Quando o controle automatico esta com o valor "1" não esta sendo logado a saida do método iImprimirTexto_DUAL_DarumaFramework

Implementação - eBuscarPortaVelocidade_ECF_Daruma - Retorna 1 (OK) mas não encontra o ECF

Nova Implementação - Implementar tags PeriodoInicial e PeriodoFinal dentro de ECF\REDUCAOZ - Quando as duas tags estiverem preenchidas os relatórios selecionados
                      em ECF\REDUCAOZ\Relatorios devem ser gerados com o periodo informado nas duas tags. Se for informado somente a data inicial, a DFW deve pegar 
					  como data final o movimento da ultima RZ

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 04/04/2012

Versão Arquivo: 07.00.15

Versão do Produto: ECF 6.16, DUAL 4.26, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - iCCDAbrirPadrao_ECF_Daruma - Quando é método é chamado após a emissão de um CNF, esta dando o erro "Informações sobre pagamento não disponíveis"

Implementação - Quando a chave ECF\Auditoria esta com o valor "0", esta sendo gerado o arquivo Auditoria_ECF.txt somente com as informações de versionamento da dll. Quando a chave esta com o valor "0" nenhum arquivo deve ser gerado

Implementação - iImprimirTexto_DUAL - Com a impressora DR700L a impressão de buffers grandes esta apresentando o retorno -50.

Nova Implementação - Adicionada tag ECF\REDUCAOZ\TimeOutReducaoZ, essa tag recebe o tempo em segundos e é criado com o valor default de 30

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 29/03/2012

Versão Arquivo: 07.00.12

Versão do Produto: ECF 6.14, DUAL 4.25, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - Melhorar log do linux, hoje esta sendo mostrado varias vezes os métodos internos como de abertura de serial e escrita da serial, o que faz aumentar o log e dificultar a analise

Implementação - rGerarRelatorio_ECF_Daruma - TDM e Sintegra  - os documentos emitidos antes das 02:00hs mesmo já sendo de outro dia de movimento, estão ficando no dia anterior, como se a RZ tivesse sido emitida as 02hs.

Implementação - rGerarRelatorio_ECF_Daruma - esta retornando -102 ao fazer a leitura do Daruma.inf

Implementação - eInicializar_MODEM esta retornando -3 no Linux

Implementação - eBuscarPortaVelocidade_ECF_Daruma - Quando temos uma placa de modem para conexão discada instalado na maquina o método esta retornando 1 (OK) mas não consegue se comunicar com o ECF

Implementação - iImprimirTexto_DUAL_DarumaFramework - Em algum momentos esta sendo mostrando erro de comunicação com a impressora

Implementação - Logar os parâmetros que a dll envia para o método iCCDAbrirPadrao

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 23/03/2012

Versão Arquivo: 07.00.05

Versão do Produto: ECF 6.11, DUAL 4.22, MODEM 3.17, TA2000 4.05

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - MF, TDM - o valor do GT mostrado nos registros E02 e E11 estão diferentes do valor do GT impresso na redução Z, no relatório esta sendo mostrado um valor maior que na redução Z

Implementação - confHabilitarHorarioVerao_ECF_Daruma e confDesabilitarHorarioVerao_ECF_Daruma - Quando um dos dois métodos são chamados o Observer esta sendo encerrado

Implementação - iRGImprimirTexto_ECF_Daruma - Esta sendo retornado erro 24 quando do checksum é null

Implementação - iCFAbrir_ECF_Daruma - Quando enviamos o CPF, mas o campo Nome ou endereço estão em branco, em Delphi esta saindo impresso o texto "(null)"

Nova Implementação - Implementado módulo DSP para trabalhar com o Display do produto Daruma PDV TouchW@y

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 15/03/2012

Versão Arquivo: 06.04.08

Versão do Produto: ECF 6.08, DUAL 4.22, MODEM 3.17, TA2000 4.05

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - o binário da MFD é lido  e a janela de erro informado que a aplicação sera fechada esta sendo mostrada

Implementação - iCCDAbrirPadrao_ECF_Daruma - esta retornando o erro "Entre com digitos numericos somente" e o CCD não é aberto

Implementação - iReducaoZ_ECF_Daruma - Impressora MACH1 - o comando esta retornando -1 mas a redução z é impressa

Implementação - rStatusImpressora_ECF_Daruma - Quando a impressora esta na USB, se desligar a impressora e chamar o método o mesmo retorna -6 (impressora desligada) e quando ela é ligada novamente o método continua retornando -6

Nova Implementação - iReducaoZ_ECF_Daruma - quando a chave ECF\REDUCAOZ\AvisarReducao estiver com o valor 1, se a diferença entre a primeira e a segunfa chamado do método for maior que 10 minutos deve mostrar novamente a mensagem de bloqueio do ECF.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 14/03/2012

Versão Arquivo: 06.04.04

Versão do Produto: ECF 6.04, DUAL 4.22, MODEM 3.17, TA2000 4.05

Implementações / Novas Implementações:

Implementação - iCFEmitirCupomAdicional_ECF_Daruma - Quando emitido após um CCD, o valor da forma de pagamento vinculada esta errado

Implementação - eAcionarGuilhotina_ECF_Daruma - Quando a impressora esta com a guilhotina configurada como Corte Parcial o método retorna o erro "Guilhotina não habilitada" e o acionamento não é feito.

Implementação - TA2000 - iEnviarDadosFormatados_TA2000_DarumaFramework - Quando digito uma quantidade de casas, apago, e digito uma quantidade menor, esta vindo sujeira no resultado

Implementação - eRetornarPortasCOM_ECF_Daruma - em VB6 e Visual FoxPro o método é executado com sucesso (retorno 1) mas não esta trazendo as portas COM

Nova Implementação - Quando a tag ECF\REDUCAOZ\AvisarReducaoZ esta com o valor 1 e o método iReducaoZ_ECF_Daruma for chamado a DFW vai verificar se a redução z vai bloquear a impressora, se bloquear deve mostrar um retorno avisando o bloqueio, e se realmente o cliente quiser imprimir a RZ o método deve ser chamado novamente

Nova Implementação - Implementar rotas de IP/COM para o módulo DUAL, a tag de rota deve conter a porta COM (serial) que sera mapeada e o IP que a impressora esta conectada. Quando o usuário chamar na aplicação a porta COM que foi configurada na rota, a dll vai mandar os comandos para o IP configurado e não para a COM

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 09/03/2012

Versão Arquivo: 06.03.01

Versão do Produto: ECF 6.00, DUAL 4.21, MODEM 3.19, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED – Quando o mês não teve movimento logo no primeiro dia o arquivo é gerado apenas com os registros 0200

Nova Implementação - rInfoEstendida_MODEM_Daruma - O comando deve retornar o indice do SMS quando a mensagem for enviada com sucesso

Nova Implementação - Criar no módulo MODEM do XML a tag ListarSMS, essa tag pode aceitar 3 valores(0, 1 e 2). Quando estiver com o valor "0" o comando rListarSMS deve listar
					 todos os SMS, com o valor 1 o comando rListarSMS deve listar somente as mensagens lidas e com o valor 2 o comando deve listar somente as mensagens não lidas.

Nova Implementação - Implementar rotinas de execução automática de relatórios e retornos de informação antes ou após a redução Z.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 02/03/2012

Versão Arquivo: 06.02.01

Versão do Produto: ECF 5.98, DUAL 4.21, MODEM 3.17, TA2000 4.04

Implementações / Novas Implementações:

Implementação - DUAL - Quando enviamos um buffer muito grande  através da conexão socket a impressão não esta sendo completada

Implementação - DUAL - Quando alteramos as configurações de porta no módulo DUAL em tempo de execução, a configuração não entra em vigor até que o comando eDefinirProduto_Daruma seja chamado

Implementação - DUAL - quando a DFW não consegue comunicação socket com a impressora, o retorno demorando cerca de dois minutos para responder o erro de comunicação

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60I - Campo 11 (base de cálculo do ICMS) deve mostrar o valor total do item, hoje estamos mostrando o valor unitário do produto

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0000 não esta sendo gerado

Nova Implementação - criar tag ECF\Wine no XML DarumaFrameWork.xml- Quando a chave estiver com o valor "1" a velocidade da impressora deve ser alterada para 38400, essa alteração deve ser feita porque as bibliotecas do Wine não permitem que o download de binários seja feito em alta velocidade na serial

Nova Implementação - organização das tags internas do XML  por produtos por ordem alfabética

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 24/02/2012

Versão Arquivo: 06.01.02

Versão do Produto: ECF 5.96, DUAL 4.20, MODEM 3.17, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iReducaoZ_ECF_Daruma - Com a impressora MACH1 o comando esta retornando -1 mas a redução Z é impressa

Implementação - rTipoUltimoDocumentoInt_ECF_Daruma e rTipoUltimoDocumentoStr_ECF_Daruma - Se estou com um Cupom fiscal ou um cupom não fiscal aberto e envio o método iRGFechar_ECF_Daruma a dll retorna que o ultimo documento emitido foi um Relatório Gerencial

Nova Implementação - eApagarSms_MODEM_DarumaFramework - quando o parâmetro informado for “ 0 ”, todas as mensagens do chip são apagadas

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 13/02/2012

Versão Arquivo: 06.00.01

Versão do Produto: ECF 5.94, DUAL 4.20, MODEM 3.16, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarEspelhoMFD_ECF_Daruma - Quando o tipo de intervalo é DATAM(3), e o periodo solicitado não tem movimento, a dll não esta retornando o método com o valor -106 (não possui movimento no periodo solicitado)

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, TDM - registro E15 - quando é dado desconto em porcentagem (%) no item, essa informação não esta aparecendo na posição 14 do registro

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, TDM - Registro E15 - Campo 16 - Valor total liquido esta vindo negativo

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, TDM - Registro E21 - quando o documento emitido for um Cupom Fiscal, o campo 08 (GNF) deve vir zerado

Implementação - rListarSMS_MODEM_DarumaFramework - a dll esta listando as mensagens armazenadas no modem e não no sim card, o correto é listar as mensagens do sim card

Nova Implementação - rReceberSMSIndice_MODEM_DarumaFramework - O comando deve permitir que o usuário informe o índice do SMS que ele deseja fazer a leitura

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 07/02/2012

Versão Arquivo: 05.31.04

Versão do Produto: ECF 5.90, DUAL 4.20, MODEM 3.15, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - Quando a impressora é desligada logo após o envio do método, a dll lebin esta sendo chamada em vez de sair do método com o retorno -6

Implementação - tEnviarSMSOperadora_MODEM_DarumaFramework não esta sendo mostrado no Observer

Implementação - eBuscarPortaVelocidade_MODEM_DarumaFramework não esta sendo mostrado no Observer

Nova Implementação - Implementado o parâmetro VIVANOTA no método rGerarRelatorio_ECF_Daruma

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 06/02/2012

Versão Arquivo: 05.30.00

Versão do Produto: ECF 5.86, DUAL 4.20, MODEM 3.15, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo gerado os registros C425 de todos os dias no perfil B do SPED (SPED_DRM_B.TXT)

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, TDM - registro E15 - quando é dado desconto em valor ($) no item, essa informação não esta aparecendo na posição 14 do registro.

Implementação - iRGImprimirTexto_ECF_Daruma - quando o texto "<<<Comprovante>>> " é enviado o método retorna -1 e o texto não é impresso

Implementação - rGerarRelatorio_ECF_Daruma - Quando selecionamos apenas um dia de movimento, somente o registro 0200 do SPED esta sendo gerado

Nova Implementação - implementar troca de velocidade do modem. Quando o usuário alterar o valor da tag MODEM\Velocidade a velocidade do modem tambem deve ser reconfigurada e a dll deve permanecer conectada

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 31/01/2012

Versão Arquivo: 05.28.03

Versão do Produto: ECF 5.84, DUAL 4.20, MODEM 3.14, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Somente os registros 0200 estão sendo gerados

Implementação - rGerarRelatorio_ECF_Daruma - a dll fica travada fazendo a leitura dos eventos do arquivo binário e retorna access violation

Implementação - rGerarRelatorio_ECF_Daruma - MF, TDM, NFPTDM - Registro E10 não esta sendo gerado, o registro deve ser gerado quando a fita detalhe é impressa

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, TDM - Registro E17 - Gerar o registro E17 mesmo que o totalizador esteja com o valor zerado (0,00).

Nova Implementação - Organizar os métodos na treeview do Observer seguindo a mesma lógica de organização do exemplo em Delphi7, essa organização não deve alterar os índices dos métodos

Nova Implementação - eBuscarPortaVelocidade_MODEM_DarumaFramework para o módulo MODEM, o comando deve encontar a porta e velocidade que o modem esta configurado. 

Nova Implementação - Nos comando eRSAAssinarArquivo, rGerarRelatorio e rRSA a dll deve aceitar a string com a chave e tambem o arquivo .key (como é hoje)

------------------------------------------------------------------------------------------------------------------------------------------------------------


DarumaFramework.dll

Data de liberação: 23/01/2012

Versão Arquivo: 05.26.17

Versão do Produto: ECF 5.76, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iTEFFechar_ECF_Daruma - Quando o comando é chamado sem ter um CCD ou RG em aberto, o comando rStatusUltimoCMD esta trazendo erro 0 em vez de 84

Implementação - Cupom Adicional - Se o valor do cupom fiscal é 0,10 , o campo da forma de pagamento só esta mostrando o valor " ,10".

Nova Implementação - eRetornarAvisoErroUltimoCMD_ECF_Daruma(Str_Aviso, Str_Erro) - O método deve retornar o texto referente ao erro e aviso do ultimo comando executado


------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 20/01/2012

Versão Arquivo: 05.26.16

Versão do Produto: ECF 5.75, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - MFD, TDM, NFP, NFPTDM - Registro E15 - Quando temos um desconto no item e depois um desconto no cupom fiscal, o valor mostrado no campo 14 (desconto sobre item) esta saindo errado. Em vez de mostrar o valor de 4,20 esta mostrando 42000000

Implementação - rGerarRelatorio_ECF_Daruma - MFD, TDM, NFP, NFPTDM, Registro E21 - Esta sendo mostrado 2 registros na mesma linha

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0000 - O campo 6 (Nome da empresa) esta saindo com espaços no inicio, a dll deve tirar os espaços do inicio e final do campo


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 17/01/2012

Versão Arquivo: 05.26.10

Versão do Produto: ECF 5.70, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - não esta sendo gerado o registro 0000

Implementação - iTEFImprimirResposta ou iTEFImprimirRespostaCartao - esta retornando -99 quando o CCD não esta aberto

Implementação - rCodigoModeloFiscal_ECF_Daruma - quando estamos com a impressora MACH 2, o código nacional de identificação do ECF esta retornando o valor 0814

Implementação - iCFIdentificarConsumidor_ECF_Daruma - Somente o campo CNPJ deve ser obrigatório, caso o campo nome e/ou endereço esteja em branco a dll deve aceitar e executar o comando

Implementação - rGerarRelatorio_ECF_Daruma - MFD, TDM, NFPTDM, NFP - Registro E16 - Não esta sendo gerado registro para toda Leitura X e relatório gerencial que foi impresso

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0000 - Não esta mostrando a UF no campo 9 

Implementação - iRGImprimirTexto_ECF_Daruma - quando o texto tem o caracter < a impressão não esta sendo feita, a dll esta reconhecendo como uma tag

Implementação - rGerarRelatorio_ECF_Daruma - MF - Registro E02 - Não estão sendo mostradas as informações do cliche da impressora, como CNPJ, nome, endereco

Implementação - iCFVender_ECF_Daruma - no Delphi, quando algum parâmetro não foi enviado a dll não esta mostrando o retorno -99

Implementação - iCCDImprimirArquivo_ECF_Daruma - não está funcionando quando o arquivo enviado tem mais de 68 caracteres a impressão não esta sendo realizada

Implementação - rGerarRelatorio_ECF_Daruma - SPED - C470 - Quando for alíquota de ISS o campo 7 deve ficar com o valor 090 e o campo alíquota com o valor 00,00

Implementação - rGerarRelatorio_ECF_Daruma - SPED - C460 - Quando o cupom é cancelado o campo CPF deve ficar em branco

Implementação - rGerarRelatorio_ECF_Daruma - SPED - C460 - tirar a formatação do campo de CPF do cliente, informar somente os números

Implementação - rGerarRelatorio_ECF_Daruma - SPED - C490 - Gerar o registro C490 mesmo quando a aliquota for de ISS, informar o campo aliquota com o valor de 0,00 e o campo de valor com o mesmo valor que esta no registro C420 correspondente

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 29/12/2011

Versão Arquivo: 05.26.03

Versão do Produto: ECF 5.63, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60I - O valor liquido da mercadoria esta saindo errado devido a configuração de decimais da impressora. no cupom esta como 0,93 mas no arquivo esta saindo somente 9

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 29/12/2011

Versão Arquivo: 05.26.02

Versão do Produto: ECF 5.62, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - rRetornarInformacao_ECF_Daruma - O usuário pode solicitar mais de um índice por vez, para isso os indices devem ser contatenados com o caracter "+"

Nova Implementação - rGerarRelatorio_ECF_Daruma - Implementada a tag LMFC (leitura da memória fiscal completa em arquivo) e LMFS (leitura da memoria fiscal simplificado em arquivo)

Nova Implementação - rGerarRelatorioOffLine_ECF_Daruma - O método tambem deve aceitar o binário bruto (.dat) e fazer a geração dos relatórios com base nesse arquivo

Implementação - rGerarRelatorio_ECF_Daruma - quando selecionamos algum relatório de baixo nivel e pedimos para assinar todos os arquivos (tag [EAD]) o método esta retornando erro

Implementação - rGerarEspelhoMFD_ECF_Daruma - Quando a impressora esta a 115200 o espelho esta sendo criado incompleto e a dll fica travada, mesmo depois que a impressora ja respondeu. Quando a impressora esta a 9600 ou 38400 o problema não ocorre

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0200 - Em alguns registros a descrição do produto esta saindo com um espaço em branco antes

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C460 - Campo 3 esta vindo com o valor 07 quando ocorre cancelamento de algum item, mas o correto é colocar como 00

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C420 - o campo 4 deve ficar em branco quando aliquota for F, I, N, CAN-T, DT, DS, AT, AS

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C470 - o campo ALIQ_ICMS deve vir com o valor 0,00 quando o campo CST_ICMS for igual a 040 ou 060

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0200 e C470 - no campo de aliquota devemos colocar o valor com 2 decimais, exemplo, 17,00

Implementação - rGerarRelatorio_ECF_Daruma - SPED - registro 0200 e C470 - Quando a descrição do item tem mais de 60 posições, o campo de unidade esta sendo preenchido com lixo, pegando os ultimos caracteres do campo anterior

Implementação - rGerarRelatorio_ECF_Daruma - SPED - registro C460 - Quando o cupom é cancelado somente os 4 primeiros campos devem ser preenchidos, o restante deve ser colocado em branco, hoje o campo de PIS e COFINS estão sendo preenchido com 0,00

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, MF, TDM - Quando temos uma redução Z sem movimento a dll esta retornando -106 (indicanco que não tem movimento no periodo selecionado) e não gera os relatórios com as informações que ela possui


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 16/12/2011

Versão Arquivo: 05.25.01

Versão do Produto: ECF 5.42, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - Quando a tag [EAD] esta selecionada, todos os relatórios devem ser assinados

Implementação - rGerarRelatorio_ECF_Daruma - SPED - O valor do item no registro C470 esta saindo com as casas decimais erradas

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM, TDM - Registro E14 - quando ocorre cancelamento de cupom fiscal o campo CCF esta saindo com o valor errado, esta vindo como CCF+1

Implementação - rGerarRelatorio_ECF_Daruma - MFD, TDM, NFP - Registro E21 esta sendo gerado com [NULL] no final da linha


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 14/12/2011

Versão Arquivo: 05.24.16

Versão do Produto: ECF 5.39, DUAL 4.01, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rLeituraX_ECF_Daruma - com a impressora na porta USB o arquivo de saída foi gerado incompleto

Implementação - rLeituraX_ECF_Daruma - se o comando for chamado mais de uma vez, as informações do arquivo estão sendo concatenadas, o arquivo não esta sendo zerado

Implementação - rGerarRelatorio - SPED - Registro C490 - Retirado o valor 2D do campo 8 desse registro. o Campo deve ficar vazio

Implementação - rRetornarInformacao_ECF_Daruma - Mehoria no tempo de execução do comando

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 07/12/2011

Versão Arquivo: 05.24.11

Versão do Produto: ECF 5.35, DUAL 4.01, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iCFEmitirCupomAdicional_ECF_Daruma - Não esta sendo emitido cupom adicional após a impressão de um cupom de bilhete de passagem

Implementação - iCFBPAbrir_ECF_Daruma - O comando não esta funcionando quando os parâmetros de Nome, endereco e documento são informados

Implementação - O primeiro cupom fiscal de bilhete de passagem esta saindo com os valores errados.

Implementação - iCFCancelar_ECF_Daruma - Quando o CCD esta em aberto o comando não esta fazendo o estorno do CCD e o cancelamento do cupom

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 05/12/2011

Versão Arquivo: 05.24.07

Versão do Produto: ECF 5.32, DUAL 4.01, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rTipoUltimoDocumentoInt_ECF_Daruma e rTipoUltimoDocumentoStr_ECF_Daruma estão retornando valor errado quando o ultimo documento chamado foi iSangria_ECF_Daruma e iSuprimento_ECF_Daruma

Implementação - iSuprimento_ECF_Daruma - Não esta sendo permitido que o usuário envie o parâmetro de texto livre em branco

Implementação - iSangria_ECF_Daruma - Não esta sendo permitido que o usuário envie o parâmetro de texto livre em branco

Implementação - iCFBPAbrir_ECF_Daruma não esta aceitando os parametros de nome, endereco e documento em branco

Implementação - iCCDEstornar_ECF_Daruma - não esta aceitando os parametros de nome, endereco e documento em branco

Implementação - iCCDAbrir_ECF_Daruma - Os campos de nome, endereco e documento estão sendo impressos com o texto "(null)" quando o usuário não informa essas informações

Implementação - rStatusImpressora_ECF_Daruma esta retornando -6 quando a tag ECF\RetornarAvisoErro esta com o valor 0

Implementação - rInfoEstendida_ECF_Daruma - Não esta sendo retornada a informação de abertura de cupom fiscal (iCFAbrir_ECF_Daruma)

Implementação - eApagarSMS_ECF_Daruma - esta trazendo o retorno 1 mesmo quando não temos mensagem para ser apagada no modem

Nova Implementação - Implementada comunicação com impressora não fiscal DR700 Ethernet

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 30/11/2011

Versão Arquivo: 05.24.02

Versão do Produto: ECF 5.29, DUAL 4.00, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iReducaoZ_ECF_Daruma - quando o redução tem mais de 20 PDFs a aplicação esta sendo encerrada

Implementação - rVerificarImpressoraLigada_ECF_Daruma e eBuscarPortaVelocidade_ECF_Daruma estão trazendo valor inválido em erro e aviso

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 29/11/2011

Versão Arquivo: 05.24.01

Versão do Produto: ECF 5.28, DUAL 4.00, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - campo 10 Registro 60I - deve mostrar o valor liquido do produto e não do item

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C490 - Quando o campo CST_ICMS for 30,40,41,50 ou 60 o campo 06 tambem deve vir com o valor zero

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - registro 60D e 60I - quando o código do produto tem mais de um espaço a dll esta colocando somente 1 no arquivo. exemplo: código = teste    4, no arquivo do SINTEGRA aparece como teste 1 (somente com 1 espaço).

Implementação - rGerarEspelhoMFD_ECF_Daruma - Quando a data atual da impressora é passada como parametro, a dll esta retornando que a data é maior que a emissão da ultima RZ

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 22/11/2011

Versão Arquivo: 05.23.08

Versão do Produto: ECF 5.25, DUAL 3.24, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo feito o rateio do acréscimo colocado no final do cupom quando os produtos são vendidos com a mesma alíquota

Implementação - rGerarRelatorio_ECF_Daruma - SPED - O registro 0200 gera as aliquotas com vírgula e no C270 esta gerando no formato sem virgula, colocar os 2 registros com a mesma formatação

Implementação - Alterar a mensagem de Cupom Mania para "CUPOM MANIA, CONCORRA A PRÊMIOS" na linha 1 e "ENVIE SMS P/ 6789: 99999999ddmmaa888888777" na linha 2. onde  “99999999” representa o número da Inscrição Estadual do contribuinte usuário do ECF, impresso no cabeçalho do Cupom Fiscal, com 8 dígitos; Quando flag ECF\CF\CupomMania=2 a mensagem deve ser impressa na penultima e ultima linha da mensagem promocional.
 “ddmmaa” representa a data de emissão do Cupom Fiscal impressa em seu cabeçalho, no formato dia, mês e os dois últimos dígitos do ano;

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 11/11/2011

Versão Arquivo: 05.23.03

Versão do Produto: ECF 5.20, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - Quando ocorre ao na geração de relatórios a dll não esta voltando a velocidade da impressora para a que o usuário estava utilizando

Implementação - iRGImprimirTexto_ECF_Daruma - Não esta sendo impresso o texto e o BMP quando a tag <bmp> esta sendo colocada no final da string de comando

Implementação - rStatusUltimoCMDInt_ECF_Daruma - em VB6 em modo debug o retorno de erro e aviso sempre vem com 0 (sem erro e sem aviso) mesmo quando temos algum erro na impressora

Implementação - tag <bmp> só esta funcionando quando mandamos algum texto junto com a tag, exemplo <bmp>1</bmp>teste

Implementação - rVerificarImpressoraLigada_ECF_Daruma - esta retornando -6 (impressora desligada) quando a tag ECF\ControleAutomatico esta com o valor 1

Nova Implementação - eAcionarGuilhotina_ECF_Daruma - Quando temos algum documento em aberto e tentamos acionar a guilhotina é retornado o erro avisando que a guilhotina esta desabilitada 

-------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 31/10/2011

Versão Arquivo: 05.22.20

Versão do Produto: ECF 5.12, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - Minas Legal - Alterado a formatação do texto do Minas Legal devido a alteração na legislação, agora esta sendo colocada as casas decimais
do valor total do cupom e tambem foram colocados espaços entre o CNPJ, data e valor do cupom

Nova Implementação - Implementado valor 3 na tag ECF\Auditoria, com esse valor o arquivo gerado fica bloqueado para visualização ou edição enquanto a dll não for encerrada

Implementação - iMFLerSerial_ECF_Daruma - Quando a impressora esta na porta USB o arquivo esta sendo gerado incompleto

Implementação - iMFLerSerial_ECF_Daruma - A aplicação esta entrando em loop durante a geração do arquivo quando a impressora esta na porta USB

Nova Implementação - Implementado rCalcularMD5_ECF_Daruma no Observer

Implementação - eAcionarGuilhotina_ECF_Daruma - esta retornando 0 mesmo quando o comando é executado com sucesso

Implementação - eInterpretarRetorno_ECF_Daruma - Quando o índice é -106 o texto retornado esta errado, o correto é "Não possui movimento no periodo solicitado"

Nova Implementação - Implementado tag <sl> no módulo ECF, com esta tag é possível realizar o salto de linhas de 01 a 99 no relatório gerencial e no CCD

Implementação - rGerarRelatorio_ECF_Daruma - TDM e MF - registro E09 - Quando o reinicio de operação ocorre durante o horário de verão, a hora mostrada no campo 
07 do registro esta vindo errada

Implementação - quando o papel acaba, coloco nova bobina, chama o comando rVerificarImpressoraLigada e depois rRetornarInformacao com indice 56.
A aplicação java esta caindo e retornando AccessViolation na JVM

Implementação - Nova Implementação do comando  rRetornarVendaBruta_ECF_Daruma

Implementação - Quando pedimos para gerar o relatório do dia de hoje (dia aberto) a dll não esta retornando o erro -105 (data informada é maior que a ultima redução Z)

Implementação - eBuscarPortaVelocidade_ECF_Daruma - Quando temos mais de 2 portas COM o comando esta retornando -6 (impressora desligada)

Implementação - iRGAbrir_ECF_Daruma - a descrição do RG esta como case sensitive, mas deve aceitar sendo maiusculo ou minusculo

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 18/10/2011

Versão Arquivo: 05.22.04

Versão do Produto: ECF 4.97, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iCCDImprimirTexto_ECF_Daruma - Não esta aceitando tags de código de barras, o comando retornar 1 mas nada é impresso
Implementação - iRGImprimirTexto_ECF_Daruma - quando coloco um \n no final da linha do texto, a dll esta colocando uma linha em branco logo abaixo do texto

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 14/10/2011

Versão Arquivo: 05.22.03

Versão do Produto: ECF 4.96, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - o cadastro de alíquota esta sendo feito na ultima posição
Implementação - eInterpretarAviso, eInterpretarErro e eInterpretarRetorno não estão sendo logados
Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - não estão logando os parâmetros informados
Nova Implementação - MinasLegal - Quando a tag ECF\CF\MinasLegal estiver habilitada o texto deve ser impresso na ultima linha da mensagem promocional

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 10/10/2011

Versão Arquivo: 05.21.00

Versão do Produto: ECF 4.92, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - DUAL - tag <sn> - esta emitindo o sinal sonoro mas esta pulando uma linha
Implementação - iRGImprimirTexto_ECF_Daruma - Quando o relatório gerencial é fechado automaticamente após 2 minutos, o comando
	não esta abrindo o relatório gerencial
Implementação - iCFEncerrarPadrao_ECF_Daruma e iCFEncerrarResumido_ECF_Daruma - Quando colocamos um texto com tags de formatação
	no XML o texto esta sendo impresso duas vezes no final do cupom, sendo que uma vez ele esta formatado e outra não
Implementação - tag <bmp> não esta funcionando corretamente, a imagem só é impressa quando mandamos algum texto junto com a tag
Implementação - rStatusUltimoCMDInt_ECF_Daruma e rConsultaStatusImpressoraStr_ECF_Daruma estão travando o Observer
Implementação - rConsultaStatusImpressoraInt_ECF_Daruma não esta trazendo o retorno
Implementação - eMemoriaFiscal_ECF_Daruma não esta funcionando no Observer
Nova Implementação - Implementada a tag ECF\CF\MensagemFormaPagamento
Nova Implementação - Implementada a tag Observer\Latencia
Nova Implementação - Implementado tratamento de retorno do fim de papel
Nova Implementação - Implementado no Observer os métodos:
eAcionarGuilhotina_ECF_Daruma,
rStatusGaveta_ECF_Daruma, 
rAssinarRSA_ECF_Daruma, 
rGerarMF_ECF_Daruma, 
rGerarMFD_ECF_Daruma,
rGerarNFP_ECF_Daruma, 
rGerarSINTEGRA_ECF_Daruma, 
rGerarSPED_ECF_Daruma, 
rGerarTDM_ECF_Daruma, 
rRetornarGTCodificado_ECF_Daruma, 
rVerificarGTCodificado_ECF_Daruma,
eInterpretarRetorno_ECF_Daruma, 
rInfoEstendida_ECF_Daruma, 
rLerDecimais_ECF_Daruma, 
rLerMeiosPagto_ECF_Daruma, 
rLerRG_ECF_Daruma, 
rMinasLegal_ECF_Daruma, 
rRetornarDadosReducaoZ_ECF_Daruma, 
confDesabilitarModoPreVenda_ECF_Daruma, 
confHabilitarModoPreVenda_ECF_Daruma, 
confProgramarIDLoja_ECF_Daruma, 
confProgramarOperador_ECF_Daruma


-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 03/10/2011

Versão Arquivo: 05.17.01

Versão do Produto: ECF 4.87, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - Implementado as tags para impressão de código de barras no encerramento do cupom e relatório gerencial
Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo gerado todos os registros C470 referente aos itens vendidos no dia
Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo colocado o caracter CR no final dos registros 0200

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 22/09/2011

Versão Arquivo: 05.16.38.0

Versão do Produto: ECF 4.85, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - Implementado registros 0000 e 0200 no SPED perfil A e perfil B gerados pelo comando rGerarRelatorio_ECF_Daruma
Nova Implementação - ECF - Retirado do log as chamadas internas do comando eXMLAlterarValor no start up da dll e colocado o texto do XML
Nova Implementação - DUAL - Retirado do log as chamadas internas do comando eXMLAlterarValor no start up da dll e colocado o texto do XML
Implementação - rGerarRelatorio_ECF_Daruma MFD e TDM - No registro E21 não esta mostrando o valor estornado da forma de pagamento
Implementação - iCFVender_ECF_Daruma - Se tenho alguma alíquota cadastrada fora de ordem o comando esta retornando o erro -3 (aliquota não encontrada)
Implementação - iCFIdentificarConsumidor_ECF_Daruma - comando não esta disponível para o Observer

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 20/09/2011

Versão Arquivo: 05.16.31.0

Versão do Produto: ECF 4.80, DUAL 3.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iEstornarPagamento_ECF_Daruma - Não esta aceitando a descrição da forma de pagamento, somente o índice

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 13/09/2011

Versão Arquivo: 05.16.30.0

Versão do Produto: ECF 4.78, DUAL 3.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iCFEmitirCupomAdicional_ECF_Daruma - Quando o comando é chamado mais de uma vez em seguida, o número do COO do cupom de origem esta sendo alterado, sendo que deveria continuar o mesmo
Implementação - iCFEncerrar_ECF_Daruma - Mesmo quando a tag ECF\CF\MINASLEGAL esta com o valor "0" a dll esta chamando internamente o comando rMinasLegal_ECF_Daruma
Implementação - O comando não esta encontrando a impressora, mesmo quando a impressora esta ligada o comando esta retornando -6.
Nova Implementação - Criada a tag <bm></bm> para ser utilizada nas impressoras DR700BM

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 06/09/2011

Versão Arquivo: 05.16.27.0

Versão do Produto: ECF 4.77, DUAL 3.19, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rRetornarInformacaoSeparador_ECF_Daruma - Quando o comando é chamado direto esta retornando Access Violation
Nova Implementação - rGerarMF_ECF_Daruma
Nova Implementação - rGerarMFD_ECF_Daruma
Nova Implementação - rGerarTDM_ECF_Daruma
Nova Implementação - rGerarSPED_ECF_Daruma
Nova Implementação - rGerarSINTEGRA_ECF_Daruma
Nova Implementação - rGerarNFP_ECF_Daruma

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 02/09/2011

Versão Arquivo: 05.16.26.0

Versão do Produto: ECF 4.76, DUAL 3.19, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rConsultaStatusImpressoraBinario_ECF_Daruma - Zerado os avisos e erros do comando porque o mesmo não pega essa informação do ECF
Implementação - rListarSMS_MODEM_DarumaFramework - a aplicação esta sendo fechada quando o método é executado
Implementação - tEnviarSMS_MODEM_DarumaFramework - Quando o modem esta ligado na porta USB o comando esta retornando o erro -3
Nova Implementação - tEnviarSMSOperadora_MODEM_DarumaFramework - Comando para enviar o SMS pelo chip selecionado pelo usuário

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 29/08/2011

Versão Arquivo: 05.16.21.0

Versão do Produto: ECF 4.73, DUAL 3.19, MODEM 3.07, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rRetornarInformacaoSeparador_ECF_Daruma, quando chamamos o comando mais de uma vez em seguida esta dando access violation
Implementação - iCFEncerrarPadrao_ECF_Daruma e iCFEncerrarResumido_ECF_Daruma esta retornando access violation quando o valor total do cupom é menor ou igual a 0,09
Implementação - eDefinirProduto_Daruma esta retornando -40 quando o produto é definido como DUAL, MODEM, TA2000 ou GENERICO

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 25/08/2011

Versão Arquivo: 05.16.16.0

Versão do Produto: ECF 4.69, DUAL 3.18, MODEM 3.07, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - rMinasLegal_ECF_Daruma
Nova Implementação - criada a tag ECF\CF\MinasLegal no xml de configuração DarumaFramework.xml
Nova Implementação - criado o alias rInfoEstendida_ECF_Daruma para o comando rInfoEstentida_ECF_Daruma
Implementação - eDefinirProduto_Daruma, se a impressora esta desligada o comando esta retornando 1 em vez de -6

-------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 22/08/2011

Versão Arquivo: 05.16.11.0

Versão do Produto: ECF 4.64, DUAL 3.18, MODEM 3.07, TA2000 4.04

Implementações / Novas Implementações:

Implementação - Quando o produto esta definido para FISCAL ou ECF e depois alteramos para DUAL, esta retornando erro -1 no comando iImprimirTexto_DUAL_Daruma
Nova Implementação - eReiniciar_MODEM_Daruma

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 17/08/2011

Versão Arquivo: 05.16.08.0

Versão do Produto: ECF 4.64, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - eInterpretarAviso e eInterpretarErro, quando for o indice 0 escrever a mensagem "Sem Aviso" para o aviso e "Sem erro" para o erro
Implementação – Quando a tag ECF\ControleAutomatico esta com o valor 1, a dll esta prendendo todas as portas COM do computador
Implementação - eBuscarPortaVelocidade - se o comando é chamado mais de uma vez, esta sendo retornado impressora desligada
Implementação - iCFVender_ECF_Daruma - quando a impressora tem uma aliquota de ISS de 5,00 e não tem a mesma aliquota em ICMS, quando mando o parâmetro de alíquota como I5,00 a impressora esta vendendo sem dar erro e esta mostrando a aliquota de ISS 5,00, sendo que deveria retornar o erro -3(Aliquota não cadastrada)

-------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 16/08/2011

Versão Arquivo: 05.16.05.0

Versão do Produto: ECF 4.61, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - Comando eInterpretarRetorno_ECF_Daruma, retorna o texto referente aos possíveis retorno dos métodos
Nova Implementação - eRetornarPortasCOM_ECF_Daruma, retorna as portas COMs que foram reconhecidas pelo Windows
Implementação – eInterpretarErro_ECF_Daruma esta retornando o texto "Erro geral ou erro de comunicação" quando o índice do erro é igual a 0
Implementação - rGerarEspelhoMFD_ECF_Daruma, mesmo quando a impressora tem movimento a dll esta retornando -106 

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 11/08/2011

Versão Arquivo: 05.16.00.0

Versão do Produto: ECF 4.56, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - Agora a DLL busca apenas as portas COMs já startadas pelo Windows e equaliza o baud rate
Nova Implementação – Sinal sonora no comando eBuscarPortaVelocidade quando a impressora é encontrada
Nova Implementação – rUltimoCMDEnviado_ECF_Daruma
Nova Implementação – rTipoUltimoDocumentoStr_ECF_Daruma
Nova Implementação – rTipoUltimoDocumentoInt_ECF_Daruma
Implementação – eBuscarPortaVelocidade não localiza a impressora quando a mesma esta na porta COM10 ou maior
Implementação – rVerificarImpressoraLigada_ECF_Daruma esta retornando -6 mesmo quando a impressora esta comunicando

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 09/08/2011

Versão Arquivo: 05.15.12.0

Versão do Produto: ECF 4.50, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - Erro no comando iCCDFechar_ECF_Daruma com impressora MACH1 quando é chamado o comando eAcionarGuilhotina
- Implementação - Retorno -1 no comando iReducaoZ_ECF_Daruma com impressora modelo MACH1 e MACH2.

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 08/08/2011

Versão Arquivo: 05.15.9.0

Versão do Produto: ECF 4.47, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - rGerarRelatorio_ECF_Daruma - Em Java a aplicação esta sendo encerrado quando pedimos para gerar qualquer relatório
- Nova Implementação - Criada a tag ECF\CF\BMP no arquivo XML de configuração, esta tag habilita a impressão automática de logotipo no encerramento do cupom fiscal, por
padrão o valor desta chave é 0 (Impressão automática de logo desabilitada). Para que o logo seja impresso automaticamente no final do cupom, deve ser informado
o número do índice em que a imagem foi carregada, esse número pode ser 1,2,3,4 ou 5. 
- Implementação - Alterado o valor padrão das tags OBSERVER\PathEntrada para c:\Daruma.cmd e OBSERVER\PathSaida para c:\Daruma.ret

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 03/08/2011

Versão Arquivo: 05.15.2.0

Versão do Produto: ECF 4.41, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - Se o produto esta como DUAL e depois alteramos para TA2000 a dll não esta liberando a porta que esta configurada no módulo DUAL
- Implementação - DUAL - Quando a tag Termica do XML esta com o valor 0 o comando iImprimirTexto_DUAL_DarumaFramework retorna Access Violation
- Implementação - DUAL - Comando iAutenticarDocumento esta retornando Access Violation
- Implementação - Comandos iCFAbrir_ECF_Daruma e iCFIdentificarConsumidor não esta aceitando tags de formatação de texto
- Nova Implementação - TAG ECF\IdentificaConsumidorFormatado que vai formatar a identificação do consumidor de acordo com o informado na tag

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 02/08/2011

Versão Arquivo: 05.14.13.0

Versão do Produto: ECF 4.39, DUAL 3.15, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - Comando rDataHoraImpressora_ECF_Daruma esta retornando data em branco quando a mesma é chamada varias vezes
- Implementação - Audiotoria_ECF - Retirado o texto comReceberByte que estava sendo repetido

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 01/08/2011

Versão Arquivo: 05.14.10.0

Versão do Produto: ECF 4.34, DUAL 3.15, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Nova Implementação - rStatusImpressoraBinario_ECF_Daruma
- Nova Implementação - rConsultaStatusImpressoraInt_ECF_Daruma
- Nova Implementação - rConsultaStatusImpressoraStr_ECF_Daruma
- Nova Implementação - Modo Genérico - eAbrirSerial_Daruma
- Nova Implementação - Modo Genérico - eFecharSerial_Daruma
- Nova Implementação - Modo Genérico - rReceberDados_Daruma
- Nova Implementação - Modo Genérico - tEnviarDados_Daruma
- Nova Implementação - iRelatorioConfiguracao_ECF_Daruma
- Implementação - Incluída a versão da dll no início do arquivo Auditoria e também no
início dos arquivos de continuação da auditoria.

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 28/07/2011

Versão Arquivo: 05.14.8.0

Versão do Produto: ECF 4.34, DUAL 3.15, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - eBuscarPortaVelocidade_ECF_Daruma não esta encontrando a impressora quando a velocidade esta a 115200
- Implementação - Quando o produto esta para DUAL e depois altero para FISCAL a dll não esta conseguindo se comunicar com a ECF.


-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 27/07/2011

Versão Arquivo: 05.14.6.0

Versão do Produto: ECF 4.32, DUAL 3.15, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - confCFBPProgramarUF_ECF_Daruma não esta funcionando no Observer
- Implementação - rLerRG_ECF_Daruma não esta retornar as informações no arquivo Daruma.ret do Observer

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 25/07/2011

Versão Arquivo: 05.14.4.0

Versão do Produto: ECF 4.32, DUAL 3.15, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - iCFCancelar_ECF_Daruma - Quando o cupom fiscal tem mais de um CCD vinculado
a ele, é feito o estorno do primeiro CCD e retornado o erro "Cancelar CCDs". O restante
dos CCD referentes ao cupom não são estornados e o cupom fiscal não é cancelado
- Implementação - iCCDImprimirTexto_ECF_Daruma - Quando é passada a tag <bmp> o comando
retorna 1 (OK) mas a imagem não é impressa, se for colocado um texto junto com a
tag o mesmo também não é impresso.
- Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo colocado o texto
"|C420|" quando o totalizador é CAN-T
- Implementação - Tags de formatação de texto junto com BMP - Quando estava sendo enviada
a tag <bmp> as tags de formatação de texto não estavam sendo reconhecidas
- Implementação - DUAL - iImprimirTexto_DUAL_Daruma - Quando é enviada a tag <s> e no
mesmo comando as tags de código de barras, a impressora só imprime o texto que foi
passado entre a tag <s>, não imprime o código de barras e a impressora fica travada.
 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 21/07/2011

Versão Arquivo: 05.14.2.0

Versão do Produto: ECF 4.31, DUAL 3.14, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

  - Implementação - iCFCancelar_ECF_Daruma - Quando o CF tem mais de um CCD vinculado a ele, é feito o estorno do primeiro CCD e é retornado o erro "Cancelar CCDs" e não é feito o estorno do segundo CCD e tambem não é feito o cancelamento do CF
  
 
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 

Data de liberação: 21/07/2011

Versão Arquivo: 05.14.1.0

Versão do Produto: ECF 4.30, DUAL 3.14, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

  - Nova Implementação - Criado comando rRetornarInformacaoSeparador_ECF_Daruma - Este método possibilita retornar do ECF mais de 170 informações diferentes ja formatadas
  e sepadadas de acordo com separador informado
 
 
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 


Data de liberação: 20/07/2011

Versão Arquivo: 05.13.3.0

Versão do Produto: ECF 4.28, DUAL 3.14, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

 - Implementação - rGerarRelatorio_ECF_Daruma - TDM, NFPTDM, MF - Venda bruta diária no registro E12 esta vindo com valor negativo quando o valor do item passa os 8 digitos
 - Implementação - tag <bmp> não esta funcionando no campo de texto livre referente ao comando iCFEncerrar_ECF_Daruma
 - Nova Implementação - Criada as tags OBSERVER\PathEntrada e OBSERVER\PathSaida, essas duas tags são utilizadas somente pelo Observer
 
 
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 


Data de liberação: 19/07/2011

Versão Arquivo: 05.12.43.0

Versão do Produto: ECF 4.25, DUAL 3.14, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

 - Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Casas decimais na quantidade configurada para 3 e valor líquido configurado para 2 
 - Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Totalizador de cancelamento de item e cancelamento de cupom
 - Implementação - rGerarRelatorio_ECF_Daruma - MFD, MF, TDM, NFP e NFPTDM - campo 10 do registro E01 esta vindo sempre com o valor 001 e não o número sequencial real do ECF
 - Implementação - rLeituraX_ECF_Daruma e rLeituraXCustomizada_ECF_Daruma - O comando retorna OK mas a leitura X não esta sendo gerada em arquivo
 - Implementação - TA2000 - Qualquer comando de display esta retornando o erro -999
 
 
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 

Data de liberação: 15/07/2011

Versão Arquivo: 05.12.39.0

Versão do Produto: ECF 4.22, DUAL 3.14, MODEM 3.06, TA2000 4.03

Implementações / Novas Implementações:

 - Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60D esta mostrando valor negativo no campo produto e base de calculo
 - Implementação - rGerarRelatorio_ECF_Daruma - SPED - No arquivo do SPED perfil A a soma dos registros C470 de um determinado totalizador não bate com o valor informado no registro C420
 
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
 
Data de liberação: 12/07/2011

Versão Arquivo: 05.12.37.0

Versão do Produto: ECF 4.20, DUAL 3.14, MODEM 3.06, TA2000 4.03

Implementações / Novas Implementações:

 - Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - quando não tem mais espaço para cadastrar TNF o método esta retornando -1  e o erro retorna 0 em vez 35
 - Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - quando não tem mais espaço para cadastrar aliquota o método esta retornando -1 e o erro retorna 0 em vez de 34
 - Implementação - iCFEncerrar_ECF_Daruma - tags de formatação condensado, enfatizado, negrito, sublinhado e dupla altura não estão funcionando no campo de mensagem promocional
 - Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - esta retornando índice invalido ao Cadastrar o primeiro TNF
 - Implementação - iImprimirCodigoBarras_ECF_Daruma - Em Delphi esta dando Access Violation e o código não é impresso
 - Implementação - iImprimirCodigoBarras_ECF_Daruma - Quando não tem CCD ou relatório gerencial aberto o comando esta retornando OK
 - Implementação - iCFEfetuarPagamento_ECF_Daruma, iCFEfeturarPagamentoFormatado_ECF_Daruma - Esta pulando linha quando é informado um espaço no parametro de texto livre
 - Implementação - iCFEfetuarPagamento_ECF_Daruma, iCFEfeturarPagamentoFormatado_ECF_Daruma - Esta imprimindo o texto "(null)" quando não é informado o parametro texto livre
 - Implementação - iCFEncerrar_ECF_Daruma - com impressora FS600 a tag negrito não esta sendo encerrado no campo de texto livre
 
 
 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 07/07/2011

Versão Arquivo: 05.12.29.0

Versão do Produto: ECF 4.12, DUAL 3.14, MODEM 3.06, TA2000 4.03

Implementações / Novas Implementações:

 - Nova Implementação - rGerarRelatorio_ECF_Daruma - SPED - Geração do relatório SPED no perfil A (SPED_DRM.txt) e no perfil B (SPED_DRM_B.txt)
 - Implementação - rRetornarInformacao_ECF_Daruma - Indice 140 - A aplicação é encerrada quando a impressora esta a 9600
 - Implementação - tag XML ECF\ControleAutomatico não esta funcionando, a porta não é liberada mesmo quando a tag esta com o valor 1
 - Implementação - Quando a tag ECF\ModoGaveta esta com o valor 1, o comando rStatusGaveta sempre retorna "Gaveta Aberta"
 - Implementação - Quando a tag ECF\ControleAutomatico esta com o valor 1, e a impressora esta desligada, o comando rRetornarInformacao_ECF_Daruma esta retornando 1 (OK) em vez de -6 (Impressora desligada)
 - Implementação - iMFLerSerial_ECF_Daruma - Estouro da variável que recebe o path configurado na tag START\LocalArquivos
 - Implementação - eBuscarPortaSerial_ECF_Daruma - Não esta fechando a porta quando a tag ECF\ControleAutomatico esta com o valor 1
 - Implementação - MODEM - Não esta fazendo a confirmação de entrega de SMS quando o modem esta na velocidade de 115200
 - Implementação - iMFLerSerial_ECF_Daruma - Quando solicitado um intervalo por CRZ maior que 100, o arquivo não é gerado
 - Implementação - Retorno de erro 140 quando é enviado 2 comandos de impressão no mesmo segundo para a impressora
 - Implementação - Alteração da velocidade da impressora pela tag ECF\Velocidade não esta funcionando quando a chave ECF\ControleAutomatico esta com o valor 1
 - Implementação - Comando rGerarRelatorio_ECF_Daruma retorna -1 quando a impressora esta com a velocidade de 9600
 - Implementação - confCadastrarPadrao_ECF_Daruma e confCadastrar_ECF_Daruma - TNF (totalizador não fiscal) esta sendo cadastrado na posição 20
 
 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 29/06/2011

Versão Arquivo: 05.12.13.0

Versão do Produto: ECF 3.98, DUAL 3.14, MODEM 2.9, TA2000 4.2

Implementações / Novas Implementações:

 - Implementação - rGerarRelatorio_ECF_Daruma - SPED - não esta vindo o valor líquido no registro C470
 - Implementação - iCFVender_ECF_Daruma - Quando é informada uma alíquota que não esta cadastrada na ECF retorna Access Violation
 - Implementação - rGerarEspelhoMFD_ECF_Daruma - COO - Esta dando retorno -1 quando tento gerar o espelho de um COO pequeno, como 000001 ou 000010 por exemplo
 - Implementação - DUAL - Impressão de texto na lateral do código de barras quando o mesmo esta na vertical
 - Implementação - rLerAliquotas_ECF_Daruma, rLerMeiosPagto_ECF_Daruma, rLerRG_ECF_Daruma, rLerCNF_ECF_Daruma - se eu chamar os comandos com a impressora ligada, as informações são retornadas sem problemas, mas se eu desligar a impressora e chamar os comandos, a dll retorna "1" no método e tambem mostra dos valores
 
 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 28/06/2011

Versão Arquivo: 05.12.8.0

Versão do Produto: ECF 3.94, DUAL 3.13, MODEM 2.9, TA2000 4.2

Implementações / Novas Implementações:

 - Implementação - Retorno -12 nos métodos mesmo quando a tag NaoAvisarPoucoPapel esta com o valor 1
 - Implementação - Não retorna -6 quando a impressora é desligada no meio do CCD
 - Implementação - Não retorna -6 quando a impressora é desligada no meio da impressão do relatório gerencial e a aplicação fica travada
 - Nova Implementação - Tag EncontrarECF - responsável por fazer o auto detect na inicialização da dll, 
 
 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 24/06/2011

Versão Arquivo: 5.11.18.0

Versão do Produto: ECF 3.87, DUAL 3.13, MODEM 2.9, TA2000 4.2

Implementações / Novas Implementações:

 - Implementação - rLerAliquotas_ECF_Daruma, rLerMeiosPagto_ECF_Daruma, rLerRG_ECF_Daruma, rLerCNF_ECF_Daruma - se a impressora esta desligada a aplicação para de responder e é encerrada
 - Nova Implementação - Sempre equalizar a velocidade na inicialização da dll
 - Nova Implementação - Alterar a velocidade da impressora ao chamar o comando regAlterarValor com o parâmetro "ECF\Velocidade"
 - Nova Implementação - Quando enviar o comando rGerarRelatorio_ECF_Daruma, alterar a velocidade da impressora para 115200 para gerar os relatórios, após a geração voltar a velocidade da impressora para a que estava configurada antes

 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 22/06/2011

Versão Arquivo: 5.11.14.0

Versão do Produto: ECF 3.84, DUAL 3.13, MODEM 2.9, TA2000 4.2

Implementações / Novas Implementações:

 - Implementação - ConfCadastrar_ECF_Daruma - FPGTO - Não estava cadastrando a forma de pagamento

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 21/06/2011

Versão Arquivo: 5.11.1.0

Versão do Produto: ECF 3.83, DUAL 3.13, MODEM 2.9, TA2000 4.2

Implementações / Novas Implementações:

 - Implementação - RZ sendo impressa automaticamente mesmo se a tag ECF\ReducaoZAutomatica esta com o valor 0.
 - Implementação - Quando a tag ECF\RetornarAvisoErro esta com o valor 1, os métodos não estão retornando -12 quando ocorre algum erro ou aviso.
 - Implementação - rRetornarDadosReducaoZ_ECF_Daruma com a impressora desligada esta retornando 1, agora quando a impressora esta desligada retorna -6.
 - Implementação - Quando a chave ECF\ControleAutomatico esta com o valor 1, e a impressora esta desligada, o comando rRetornarInformacao_ECF_Daruma esta retornando 1 (OK) em vez de -6 (impressora desligada)
 - Implementação - Se a impressora esta a 9600 e a tag ECF\Velocidade a 115200, esta dando Access Violation.
 - Implementação - Mesmo com a chave ECF\ControleAutomatico=1, o comando rGerarRelatorio_ECF_Daruma não esta liberando a porta de comunicação
 - Nova Implementação - Alterado para 0 o valor default da tag ECF\ControleAutomatico.
 - Nova Implementação - Na tag START\Produto a dll deve aceitar ECF e FISCAL.
 - Nova Implementação - comando eMemoriaFiscal_ECF(char* ParamI, char* ParamF, bool Completa, char *Tipo).
 - Nova Implementação - Implementado leitura de baixo nivel da MFD no comando rGerarRelatorio_ECF_Daruma
 